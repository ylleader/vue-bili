<template>
    <div :class="{ 'v-player-box': true, offlight }" :style="playerBoxStyle" ref="vPlayerBox">

        <div class="v-player" :class="{ pip: pipOpenState }" :style="pipOpenState ? vPlayerStyle : undefined"
            @click="videoPlayerClick" @touchstart="videoPlayerTouchstart" @dblclick="videoPlayerDblclick"
            @mousedown="videoPlayerMousedown" @mouseleave="videoPlayerMouseleave" @mousemove="videoPlayerMousemove"
            @mouseenter="videoPlayerMouseenter" ref="vPlayer">

            <video :class="{ mirror }" preload="auto" x5-playsinline playsInline webkit-playsinline x5-video-player
                controlslist="nodownload" :disablePictureInPicture="pipOpenState" ref="video" :src="videoSrc">
                <source :src="videoSrc" type="video/mp4">
                您的浏览器不支持播放视频
            </video>

            <!-- 视频控制栏 -->
            <div class="v-controls-bar"
                :class="{ 'v-controls-bar-fullscreen': fullscreen, 'v-controls-bar-hide': !isControlsBarShow || pipOpenState }"
                @mouseenter="controlsBarMouseenter" @mouseleave="controlsBarMouseleave" @dblclick.stop>

                <div class="v-controls-bar-top" ref="progressbar" @mousedown="progressBarMousedown"
                    @mousemove="progressBarMousemove" @touchstart="progressBarTouchstart">
                    <!-- 进度条 -->
                    <Popover placement="top-start" :pvisible="pvisible" :popoverHover="false" :left="progressPopupLeft"
                        :append="!fullscreen" backgroundColor="rgba(0,0,0,0)"
                        :pstyle="{ transform: 'translateX(-50%)', boxShadow: 'none' }">
                        <div slot="reference" class="progress-bar-box">
                            <div class="progress-bar">
                                <div class="progress-buffer" :style="{ width: this.buffered }"></div>
                                <div class="progress-current" :style="{ width: this.progress }"></div>
                            </div>
                        </div>
                        <div class="progress-popup">
                            <div v-if="previewImg && !pipOpenState && previmg" class="progress-popup-preimg">
                                <img :src="previmg" alt="previewImg">
                            </div>
                            <div class="progress-popup-pretime">{{ preTime }}</div>
                        </div>
                    </Popover>
                </div>
                <div class="v-controls-bar-bottom">
                    <div class="v-controls-bar-bottom-left">
                        <!-- 播放/暂停按钮 -->
                        <div class="v-controls-bar-item v-ctrl">
                            <div class="ctrl-icon" v-if="play" @click="videoPause">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"
                                    preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%;">
                                    <defs>
                                        <clipPath id="__lottie_element_425">
                                            <rect width="28" height="28" x="0" y="0"></rect>
                                        </clipPath>
                                    </defs>
                                    <g clip-path="url(#__lottie_element_425)">
                                        <g transform="matrix(1,0,0,1,14,14)" opacity="1" style="display: block;">
                                            <g opacity="1" transform="matrix(1,0,0,1,0,0)">
                                                <path fill="rgb(255,255,255)" fill-opacity="1"
                                                    d=" M-5.484000205993652,-10 C-7.953000068664551,-10 -8,-7.984000205993652 -8,-7.984000205993652 C-8,-7.984000205993652 -8.008000373840332,7.984000205993652 -8.008000373840332,7.984000205993652 C-8.008000373840332,7.984000205993652 -7.984000205993652,9.991999626159668 -5.5,9.991999626159668 C-3.0160000324249268,9.991999626159668 -3.003999948501587,7.995999813079834 -3.003999948501587,7.995999813079834 C-3.003999948501587,7.995999813079834 -2.9839999675750732,-8 -2.9839999675750732,-8 C-2.9839999675750732,-8 -3.015000104904175,-10 -5.484000205993652,-10z">
                                                </path>
                                                <path stroke-linecap="butt" stroke-linejoin="miter" fill-opacity="0"
                                                    stroke-miterlimit="4" stroke="rgb(255,255,255)" stroke-opacity="1"
                                                    stroke-width="0"
                                                    d=" M-5.484000205993652,-10 C-7.953000068664551,-10 -8,-7.984000205993652 -8,-7.984000205993652 C-8,-7.984000205993652 -8.008000373840332,7.984000205993652 -8.008000373840332,7.984000205993652 C-8.008000373840332,7.984000205993652 -7.984000205993652,9.991999626159668 -5.5,9.991999626159668 C-3.0160000324249268,9.991999626159668 -3.003999948501587,7.995999813079834 -3.003999948501587,7.995999813079834 C-3.003999948501587,7.995999813079834 -2.9839999675750732,-8 -2.9839999675750732,-8 C-2.9839999675750732,-8 -3.015000104904175,-10 -5.484000205993652,-10z">
                                                </path>
                                            </g>
                                        </g>
                                        <g transform="matrix(1,0,0,1,24.812000274658203,14)" opacity="1"
                                            style="display: block;">
                                            <g opacity="1" transform="matrix(1,0,0,1,0,0)">
                                                <path fill="rgb(255,255,255)" fill-opacity="1"
                                                    d=" M-5.484000205993652,-10 C-7.953000068664551,-10 -8,-7.984000205993652 -8,-7.984000205993652 C-8,-7.984000205993652 -8.008000373840332,7.984000205993652 -8.008000373840332,7.984000205993652 C-8.008000373840332,7.984000205993652 -7.984000205993652,9.991999626159668 -5.5,9.991999626159668 C-3.0160000324249268,9.991999626159668 -3.003999948501587,7.995999813079834 -3.003999948501587,7.995999813079834 C-3.003999948501587,7.995999813079834 -2.9839999675750732,-8 -2.9839999675750732,-8 C-2.9839999675750732,-8 -3.015000104904175,-10 -5.484000205993652,-10z">
                                                </path>
                                                <path stroke-linecap="butt" stroke-linejoin="miter" fill-opacity="0"
                                                    stroke-miterlimit="4" stroke="rgb(255,255,255)" stroke-opacity="1"
                                                    stroke-width="0"
                                                    d=" M-5.484000205993652,-10 C-7.953000068664551,-10 -8,-7.984000205993652 -8,-7.984000205993652 C-8,-7.984000205993652 -8.008000373840332,7.984000205993652 -8.008000373840332,7.984000205993652 C-8.008000373840332,7.984000205993652 -7.984000205993652,9.991999626159668 -5.5,9.991999626159668 C-3.0160000324249268,9.991999626159668 -3.003999948501587,7.995999813079834 -3.003999948501587,7.995999813079834 C-3.003999948501587,7.995999813079834 -2.9839999675750732,-8 -2.9839999675750732,-8 C-2.9839999675750732,-8 -3.015000104904175,-10 -5.484000205993652,-10z">
                                                </path>
                                            </g>
                                        </g>
                                        <g transform="matrix(1,0,0,1,4,14)" opacity="3.2922582931860234e-7"
                                            style="display: block;">
                                            <g opacity="1" transform="matrix(1,0,0,1,0,0)">
                                                <path fill="rgb(255,255,255)" fill-opacity="1" d="M0 0"></path>
                                                <path stroke-linecap="butt" stroke-linejoin="miter" fill-opacity="0"
                                                    stroke-miterlimit="4" stroke="rgb(255,255,255)" stroke-opacity="1"
                                                    stroke-width="0" d="M0 0"></path>
                                            </g>
                                            <g opacity="1" transform="matrix(1,0,0,1,0,0)">
                                                <path fill="rgb(255,255,255)" fill-opacity="1"
                                                    d=" M-7.031000137329102,-10.875 C-7.031000137329102,-10.875 -8.32800006866455,-11.25 -9.42199993133545,-10.468999862670898 C-10.109999656677246,-9.906999588012695 -10,-7.992000102996826 -10,-7.992000102996826 C-10,-7.992000102996826 -10,8.015999794006348 -10,8.015999794006348 C-10,8.015999794006348 -10.125,10.241999626159668 -9,10.991999626159668 C-7.875,11.741999626159668 -5,10.031000137329102 -5,10.031000137329102 C-5,10.031000137329102 7.968999862670898,1.875 7.968999862670898,1.875 C7.968999862670898,1.875 9,1.062000036239624 9,0 C9,-1.062000036239624 7.968999862670898,-1.937999963760376 7.968999862670898,-1.937999963760376 C7.968999862670898,-1.937999963760376 -7.031000137329102,-10.875 -7.031000137329102,-10.875z">
                                                </path>
                                                <path stroke-linecap="butt" stroke-linejoin="miter" fill-opacity="0"
                                                    stroke-miterlimit="4" stroke="rgb(255,255,255)" stroke-opacity="1"
                                                    stroke-width="0"
                                                    d=" M-7.031000137329102,-10.875 C-7.031000137329102,-10.875 -8.32800006866455,-11.25 -9.42199993133545,-10.468999862670898 C-10.109999656677246,-9.906999588012695 -10,-7.992000102996826 -10,-7.992000102996826 C-10,-7.992000102996826 -10,8.015999794006348 -10,8.015999794006348 C-10,8.015999794006348 -10.125,10.241999626159668 -9,10.991999626159668 C-7.875,11.741999626159668 -5,10.031000137329102 -5,10.031000137329102 C-5,10.031000137329102 7.968999862670898,1.875 7.968999862670898,1.875 C7.968999862670898,1.875 9,1.062000036239624 9,0 C9,-1.062000036239624 7.968999862670898,-1.937999963760376 7.968999862670898,-1.937999963760376 C7.968999862670898,-1.937999963760376 -7.031000137329102,-10.875 -7.031000137329102,-10.875z">
                                                </path>
                                            </g>
                                        </g>
                                    </g>
                                </svg>
                            </div>
                            <div class="ctrl-icon" v-else @click="videoPlay">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"
                                    preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%;">
                                    <g clip-path="url(#__lottie_element_234)">
                                        <g style="display: block;" transform="matrix(1,0,0,1,14,14)" opacity="1">
                                            <g opacity="1" transform="matrix(1,0,0,1,0,0)">
                                                <path fill="rgb(255,255,255)" fill-opacity="1"
                                                    d=" M-7.031000137329102,-10.875 C-7.031000137329102,-10.875 -8.32800006866455,-11.25 -9.42199993133545,-10.468999862670898 C-10.109999656677246,-9.906999588012695 -10,-7.992000102996826 -10,-7.992000102996826 C-10,-7.992000102996826 -10,8.015999794006348 -10,8.015999794006348 C-10,8.015999794006348 -10.125,10.241999626159668 -9,10.991999626159668 C-7.875,11.741999626159668 -5,10.031000137329102 -5,10.031000137329102 C-5,10.031000137329102 7.968999862670898,1.875 7.968999862670898,1.875 C7.968999862670898,1.875 9,1.062000036239624 9,0 C9,-1.062000036239624 7.968999862670898,-1.937999963760376 7.968999862670898,-1.937999963760376 C7.968999862670898,-1.937999963760376 -7.031000137329102,-10.875 -7.031000137329102,-10.875z">
                                                </path>
                                                <path stroke-linecap="butt" stroke-linejoin="miter" fill-opacity="0"
                                                    stroke-miterlimit="4" stroke="rgb(255,255,255)" stroke-opacity="1"
                                                    stroke-width="0"
                                                    d=" M-7.031000137329102,-10.875 C-7.031000137329102,-10.875 -8.32800006866455,-11.25 -9.42199993133545,-10.468999862670898 C-10.109999656677246,-9.906999588012695 -10,-7.992000102996826 -10,-7.992000102996826 C-10,-7.992000102996826 -10,8.015999794006348 -10,8.015999794006348 C-10,8.015999794006348 -10.125,10.241999626159668 -9,10.991999626159668 C-7.875,11.741999626159668 -5,10.031000137329102 -5,10.031000137329102 C-5,10.031000137329102 7.968999862670898,1.875 7.968999862670898,1.875 C7.968999862670898,1.875 9,1.062000036239624 9,0 C9,-1.062000036239624 7.968999862670898,-1.937999963760376 7.968999862670898,-1.937999963760376 C7.968999862670898,-1.937999963760376 -7.031000137329102,-10.875 -7.031000137329102,-10.875z">
                                                </path>
                                            </g>
                                        </g>
                                    </g>
                                </svg>
                            </div>
                        </div>
                        <!-- 视频时间 -->
                        <div class="v-controls-bar-item v-ctrl">
                            <div class="ctrl-time">
                                <span>{{ currentTimeFormat }}</span>/<span>{{ timeFormat }}</span>
                            </div>
                        </div>
                    </div>
                    <div class="v-controls-bar-bottom-right">
                        <!-- 视频质量按钮 -->
                        <div class="v-controls-bar-item">
                            <Popover placement="top" mode="to-top" :append="!fullscreen"
                                backgroundColor="rgba(0,0,0,.8)" :top="-26" :clickClose="true">
                                <div slot="reference" class="v-ctrl ctrl-quality">
                                    <div class="ctrl-text">
                                        {{ qualityObj[quality] }}
                                    </div>
                                </div>
                                <div class="quality-box">
                                    <div :class="{ 'q-option': true, active: quality === q }"
                                        v-for="q in [5, 4, 3, 2, 1]" :key="q" @click="quality = q">
                                        {{ qualityObj[q] }}
                                    </div>
                                </div>
                            </Popover>
                        </div>
                        <!-- 视频倍速按钮 -->
                        <div class="v-controls-bar-item">
                            <Popover placement="top" mode="to-top" :append="!fullscreen"
                                backgroundColor="rgba(0,0,0,.8)" :top="-26" :clickClose="true">
                                <div slot="reference" class="v-ctrl ctrl-playbackrate">
                                    <div class="ctrl-text">
                                        {{ playbackRate== 1 ? '倍速' : playbackRate + 'x'}}
                                    </div>
                                </div>
                                <div class="playbackrate-box">
                                    <div :class="{ 'pr-option': true, active: playbackRate === i }"
                                        v-for="i in [2, 1.5, 1.25, 1.0, 0.5, 0.25]" :key="i" @click="playbackRate = i">
                                        {{ i }}x
                                    </div>
                                </div>
                            </Popover>
                        </div>
                        <!-- 视频音量按钮 -->
                        <div class="v-controls-bar-item">
                            <Popover placement="top" mode="to-top" :append="!fullscreen"
                                backgroundColor="rgba(0,0,0,.8)" :top="-26">
                                <div slot="reference">
                                    <div class="v-ctrl ctrl-volume" v-if="volume != 0 && !muted"
                                        @click="videoMutedSetting(true)">
                                        <div class="ctrl-icon">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 88 88" width="88"
                                                height="88" preserveAspectRatio="xMidYMid meet"
                                                style="width: 100%; height: 100%;">
                                                <g clip-path="url(#__lottie_element_331)">
                                                    <g clip-path="url(#__lottie_element_333)"
                                                        transform="matrix(1,0,0,1,0,0)" opacity="1"
                                                        style="display: block;">
                                                        <g class="v1" transform="matrix(1,0,0,1,28,44)" opacity="1"
                                                            style="display: block;">
                                                            <g opacity="1" transform="matrix(1,0,0,1,0,0)">
                                                                <path fill="rgb(255,255,255)" fill-opacity="1"
                                                                    d=" M15.5600004196167,-25.089000701904297 C15.850000381469727,-24.729000091552734 16,-24.288999557495117 16,-23.839000701904297 C16,-23.839000701904297 16,23.840999603271484 16,23.840999603271484 C16,24.94099998474121 15.100000381469727,25.840999603271484 14,25.840999603271484 C13.550000190734863,25.840999603271484 13.109999656677246,25.680999755859375 12.75,25.400999069213867 C12.75,25.400999069213867 -4,12.00100040435791 -4,12.00100040435791 C-4,12.00100040435791 -8,12.00100040435791 -8,12.00100040435791 C-12.420000076293945,12.00100040435791 -16,8.420999526977539 -16,4.000999927520752 C-16,4.000999927520752 -16,-3.999000072479248 -16,-3.999000072479248 C-16,-8.418999671936035 -12.420000076293945,-11.99899959564209 -8,-11.99899959564209 C-8,-11.99899959564209 -4,-11.99899959564209 -4,-11.99899959564209 C-4,-11.99899959564209 12.75,-25.39900016784668 12.75,-25.39900016784668 C13.609999656677246,-26.089000701904297 14.869999885559082,-25.948999404907227 15.5600004196167,-25.089000701904297z">
                                                                </path>
                                                            </g>
                                                        </g>
                                                        <g class="v2"
                                                            transform="matrix(0.9999999403953552,0,0,0.9999999403953552,56,44)"
                                                            opacity="1" style="display: block;">
                                                            <g opacity="1" transform="matrix(1,0,0,1,0,0)">
                                                                <path fill="rgb(255,255,255)" fill-opacity="1"
                                                                    d=" M-4,-13.859000205993652 C0.7799999713897705,-11.08899974822998 4,-5.919000148773193 4,0.0010000000474974513 C4,5.921000003814697 0.7799999713897705,11.090999603271484 -4,13.861000061035156 C-4,13.861000061035156 -4,-13.859000205993652 -4,-13.859000205993652z">
                                                                </path>
                                                            </g>
                                                        </g>
                                                        <g class="v3"
                                                            transform="matrix(0.9999999403953552,0,0,0.9999999403953552,64.01399993896484,44.00699996948242)"
                                                            opacity="1" style="display: block;">
                                                            <g opacity="1" transform="matrix(1,0,0,1,0,0)">
                                                                <path fill="rgb(255,255,255)" fill-opacity="1"
                                                                    d=" M-6.236000061035156,-28.895999908447266 C4.803999900817871,-23.615999221801758 11.984000205993652,-12.456000328063965 11.984000205993652,-0.006000000052154064 C11.984000205993652,12.454000473022461 4.794000148773193,23.624000549316406 -6.265999794006348,28.893999099731445 C-8.255999565124512,29.8439998626709 -10.645999908447266,29.003999710083008 -11.595999717712402,27.003999710083008 C-12.545999526977539,25.013999938964844 -11.696000099182129,22.624000549316406 -9.706000328063965,21.673999786376953 C-1.406000018119812,17.724000930786133 3.9839999675750732,9.343999862670898 3.9839999675750732,-0.006000000052154064 C3.9839999675750732,-9.345999717712402 -1.3960000276565552,-17.715999603271484 -9.675999641418457,-21.676000595092773 C-11.675999641418457,-22.625999450683594 -12.515999794006348,-25.016000747680664 -11.565999984741211,-27.006000518798828 C-10.616000175476074,-29.006000518798828 -8.22599983215332,-29.84600067138672 -6.236000061035156,-28.895999908447266z">
                                                                </path>
                                                            </g>
                                                        </g>
                                                    </g>
                                                </g>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="v-ctrl ctrl-muted" v-else @click="videoMutedSetting(false)">
                                        <div class="ctrl-icon">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 88 88" width="88"
                                                height="88" preserveAspectRatio="xMidYMid meet"
                                                style="width: 100%; height: 100%;">
                                                <defs>
                                                    <clipPath id="__lottie_element_86">
                                                        <rect width="88" height="88" x="0" y="0"></rect>
                                                    </clipPath>
                                                    <filter id="__lottie_element_91" filterUnits="objectBoundingBox"
                                                        x="0%" y="0%" width="100%" height="100%">
                                                        <feComponentTransfer in="SourceGraphic">
                                                            <feFuncA type="table" tableValues="1.0 0.0"></feFuncA>
                                                        </feComponentTransfer>
                                                    </filter>
                                                    <mask id="__lottie_element_90" mask-type="alpha">
                                                        <g filter="url(#__lottie_element_91)">
                                                            <rect width="88" height="88" x="0" y="0" fill="#ffffff"
                                                                opacity="0"></rect>
                                                            <g transform="matrix(1,0,0,1,47.422000885009766,41.702999114990234)"
                                                                opacity="1" style="display: block;">
                                                                <g opacity="1" transform="matrix(1,0,0,1,-0.5,-0.5)">
                                                                    <path fill="rgb(255,255,255)" fill-opacity="1"
                                                                        d=" M-33.94157409667969,-28.281574249267578 C-35.50258255004883,-29.84258270263672 -35.50258255004883,-32.377418518066406 -33.94157409667969,-33.93842697143555 C-33.94157409667969,-33.93842697143555 -33.93842697143555,-33.94157409667969 -33.93842697143555,-33.94157409667969 C-32.377418518066406,-35.50258255004883 -29.84258270263672,-35.50258255004883 -28.281574249267578,-33.94157409667969 C-28.281574249267578,-33.94157409667969 33.94157409667969,28.281574249267578 33.94157409667969,28.281574249267578 C35.50258255004883,29.84258270263672 35.50258255004883,32.377418518066406 33.94157409667969,33.93842697143555 C33.94157409667969,33.93842697143555 33.93842697143555,33.94157409667969 33.93842697143555,33.94157409667969 C32.377418518066406,35.50258255004883 29.84258270263672,35.50258255004883 28.281574249267578,33.94157409667969 C28.281574249267578,33.94157409667969 -33.94157409667969,-28.281574249267578 -33.94157409667969,-28.281574249267578z">
                                                                    </path>
                                                                </g>
                                                            </g>
                                                        </g>
                                                    </mask>
                                                </defs>
                                                <g clip-path="url(#__lottie_element_86)">
                                                    <g mask="url(#__lottie_element_90)" style="display: block;"
                                                        class="horn">
                                                        <g transform="matrix(1,0,0,1,44,44)" opacity="1">
                                                            <g opacity="1" transform="matrix(1,0,0,1,0,0)">
                                                                <path fill="rgb(255,255,255)" fill-opacity="1"
                                                                    d=" M-0.4399999976158142,-25.09600067138672 C-0.15000000596046448,-24.736000061035156 0,-24.29599952697754 0,-23.84600067138672 C0,-23.84600067138672 0,23.833999633789062 0,23.833999633789062 C0,24.93400001525879 -0.8999999761581421,25.833999633789062 -2,25.833999633789062 C-2.450000047683716,25.833999633789062 -2.890000104904175,25.673999786376953 -3.25,25.393999099731445 C-3.25,25.393999099731445 -20,11.994000434875488 -20,11.994000434875488 C-20,11.994000434875488 -24,11.994000434875488 -24,11.994000434875488 C-28.420000076293945,11.994000434875488 -32,8.413999557495117 -32,3.99399995803833 C-32,3.99399995803833 -32,-4.00600004196167 -32,-4.00600004196167 C-32,-8.425999641418457 -28.420000076293945,-12.005999565124512 -24,-12.005999565124512 C-24,-12.005999565124512 -20,-12.005999565124512 -20,-12.005999565124512 C-20,-12.005999565124512 -3.25,-25.4060001373291 -3.25,-25.4060001373291 C-2.390000104904175,-26.09600067138672 -1.1299999952316284,-25.95599937438965 -0.4399999976158142,-25.09600067138672z M13.777999877929688,-28.895999908447266 C24.81800079345703,-23.615999221801758 31.99799919128418,-12.456000328063965 31.99799919128418,-0.006000000052154064 C31.99799919128418,12.454000473022461 24.808000564575195,23.624000549316406 13.748000144958496,28.893999099731445 C11.758000373840332,29.8439998626709 9.368000030517578,29.003999710083008 8.418000221252441,27.003999710083008 C7.4679999351501465,25.013999938964844 8.317999839782715,22.624000549316406 10.307999610900879,21.673999786376953 C18.607999801635742,17.724000930786133 23.99799919128418,9.343999862670898 23.99799919128418,-0.006000000052154064 C23.99799919128418,-9.345999717712402 18.618000030517578,-17.715999603271484 10.338000297546387,-21.676000595092773 C8.338000297546387,-22.625999450683594 7.498000144958496,-25.016000747680664 8.447999954223633,-27.006000518798828 C9.39799976348877,-29.006000518798828 11.788000106811523,-29.84600067138672 13.777999877929688,-28.895999908447266z M8,-13.866000175476074 C12.779999732971191,-11.095999717712402 16,-5.926000118255615 16,-0.006000000052154064 C16,5.914000034332275 12.779999732971191,11.083999633789062 8,13.854000091552734 C8,13.854000091552734 8,-13.866000175476074 8,-13.866000175476074z">
                                                                </path>
                                                            </g>
                                                        </g>
                                                    </g>
                                                    <g transform="matrix(1,0,0,1,41.172000885009766,46.827999114990234)"
                                                        opacity="1" style="display: block;">
                                                        <g opacity="1" transform="matrix(1,0,0,1,-0.5,-0.5)">
                                                            <path fill="rgb(255,255,255)" fill-opacity="1"
                                                                d=" M-33.94157409667969,-28.281574249267578 C-35.50258255004883,-29.84258270263672 -35.50258255004883,-32.377418518066406 -33.94157409667969,-33.93842697143555 C-33.94157409667969,-33.93842697143555 -33.93842697143555,-33.94157409667969 -33.93842697143555,-33.94157409667969 C-32.377418518066406,-35.50258255004883 -29.84258270263672,-35.50258255004883 -28.281574249267578,-33.94157409667969 C-28.281574249267578,-33.94157409667969 33.94157409667969,28.281574249267578 33.94157409667969,28.281574249267578 C35.50258255004883,29.84258270263672 35.50258255004883,32.377418518066406 33.94157409667969,33.93842697143555 C33.94157409667969,33.93842697143555 33.93842697143555,33.94157409667969 33.93842697143555,33.94157409667969 C32.377418518066406,35.50258255004883 29.84258270263672,35.50258255004883 28.281574249267578,33.94157409667969 C28.281574249267578,33.94157409667969 -33.94157409667969,-28.281574249267578 -33.94157409667969,-28.281574249267578z">
                                                            </path>
                                                        </g>
                                                    </g>
                                                </g>
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                                <div class="volume-range-box" @touchstart.prevent>
                                    <span class="range-text">{{ volume }}</span>

                                    <Slider vertical height="100px" width="4px" color="#fff"
                                        backColor="rgba(255,255,255,.4)" v-model="volume"></Slider>
                                </div>
                            </Popover>
                        </div>
                        <!-- 播放设置按钮 -->
                        <div class="v-controls-bar-item">
                            <Popover placement="top" mode="to-top" :append="!fullscreen"
                                backgroundColor="rgba(0,0,0,.8)" :top="-26">
                                <div slot="reference" class="v-ctrl ctrl-setting">
                                    <div class="ctrl-icon">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 88 88" width="88"
                                            height="88" preserveAspectRatio="xMidYMid meet"
                                            style="width: 100%; height: 100%;">
                                            <g transform="matrix(1,0,0,1,44,43.875)" opacity="1"
                                                style="display: block;">
                                                <g opacity="1" transform="matrix(1,0,0,1,0,0)">
                                                    <path fill="rgb(255,255,255)" fill-opacity="1"
                                                        d=" M0,8.125 C-4.420000076293945,8.125 -8,4.545000076293945 -8,0.125 C-8,-4.295000076293945 -4.420000076293945,-7.875 0,-7.875 C4.420000076293945,-7.875 8,-4.295000076293945 8,0.125 C8,4.545000076293945 4.420000076293945,8.125 0,8.125z M0,16.125 C8.84000015258789,16.125 16,8.96500015258789 16,0.125 C16,-8.71500015258789 8.84000015258789,-15.875 0,-15.875 C-8.84000015258789,-15.875 -16,-8.71500015258789 -16,0.125 C-16,8.96500015258789 -8.84000015258789,16.125 0,16.125z M4.539999961853027,27.51099967956543 C3.059999942779541,27.750999450683594 1.5499999523162842,27.871000289916992 0,27.871000289916992 C-1.5499999523162842,27.871000289916992 -3.059999942779541,27.750999450683594 -4.539999961853027,27.51099967956543 C-4.539999961853027,27.51099967956543 -8.699999809265137,32.56100082397461 -8.699999809265137,32.56100082397461 C-9.9399995803833,34.07099914550781 -12.100000381469727,34.46099853515625 -13.789999961853027,33.48099899291992 C-13.789999961853027,33.48099899291992 -21.780000686645508,28.871000289916992 -21.780000686645508,28.871000289916992 C-23.469999313354492,27.891000747680664 -24.209999084472656,25.83099937438965 -23.520000457763672,24.000999450683594 C-23.520000457763672,24.000999450683594 -21.290000915527344,18.06100082397461 -21.290000915527344,18.06100082397461 C-23.3799991607666,15.621000289916992 -25.049999237060547,12.810999870300293 -26.209999084472656,9.76099967956543 C-26.209999084472656,9.76099967956543 -32.65999984741211,8.680999755859375 -32.65999984741211,8.680999755859375 C-34.59000015258789,8.361000061035156 -36,6.690999984741211 -36,4.741000175476074 C-36,4.741000175476074 -36,-4.488999843597412 -36,-4.488999843597412 C-36,-6.439000129699707 -34.59000015258789,-8.109000205993652 -32.65999984741211,-8.428999900817871 C-32.65999984741211,-8.428999900817871 -26.399999618530273,-9.479000091552734 -26.399999618530273,-9.479000091552734 C-25.309999465942383,-12.559000015258789 -23.690000534057617,-15.388999938964844 -21.65999984741211,-17.868999481201172 C-21.65999984741211,-17.868999481201172 -23.959999084472656,-23.999000549316406 -23.959999084472656,-23.999000549316406 C-24.639999389648438,-25.839000701904297 -23.899999618530273,-27.888999938964844 -22.209999084472656,-28.868999481201172 C-22.209999084472656,-28.868999481201172 -14.220000267028809,-33.479000091552734 -14.220000267028809,-33.479000091552734 C-12.529999732971191,-34.45899963378906 -10.380000114440918,-34.069000244140625 -9.130000114440918,-32.558998107910156 C-9.130000114440918,-32.558998107910156 -5.099999904632568,-27.659000396728516 -5.099999904632568,-27.659000396728516 C-3.450000047683716,-27.9689998626709 -1.7400000095367432,-28.128999710083008 0,-28.128999710083008 C1.7400000095367432,-28.128999710083008 3.450000047683716,-27.9689998626709 5.099999904632568,-27.659000396728516 C5.099999904632568,-27.659000396728516 9.130000114440918,-32.558998107910156 9.130000114440918,-32.558998107910156 C10.380000114440918,-34.069000244140625 12.529999732971191,-34.45899963378906 14.220000267028809,-33.479000091552734 C14.220000267028809,-33.479000091552734 22.209999084472656,-28.868999481201172 22.209999084472656,-28.868999481201172 C23.899999618530273,-27.888999938964844 24.639999389648438,-25.839000701904297 23.959999084472656,-23.999000549316406 C23.959999084472656,-23.999000549316406 21.65999984741211,-17.868999481201172 21.65999984741211,-17.868999481201172 C23.690000534057617,-15.388999938964844 25.309999465942383,-12.559000015258789 26.399999618530273,-9.479000091552734 C26.399999618530273,-9.479000091552734 32.65999984741211,-8.428999900817871 32.65999984741211,-8.428999900817871 C34.59000015258789,-8.109000205993652 36,-6.439000129699707 36,-4.488999843597412 C36,-4.488999843597412 36,4.741000175476074 36,4.741000175476074 C36,6.690999984741211 34.59000015258789,8.361000061035156 32.65999984741211,8.680999755859375 C32.65999984741211,8.680999755859375 26.209999084472656,9.76099967956543 26.209999084472656,9.76099967956543 C25.049999237060547,12.810999870300293 23.3799991607666,15.621000289916992 21.290000915527344,18.06100082397461 C21.290000915527344,18.06100082397461 23.520000457763672,24.000999450683594 23.520000457763672,24.000999450683594 C24.209999084472656,25.83099937438965 23.469999313354492,27.891000747680664 21.780000686645508,28.871000289916992 C21.780000686645508,28.871000289916992 13.789999961853027,33.48099899291992 13.789999961853027,33.48099899291992 C12.100000381469727,34.46099853515625 9.9399995803833,34.07099914550781 8.699999809265137,32.56100082397461 C8.699999809265137,32.56100082397461 4.539999961853027,27.51099967956543 4.539999961853027,27.51099967956543z">
                                                    </path>
                                                </g>
                                            </g>
                                        </svg>
                                    </div>
                                </div>
                                <div class="setting-box">
                                    <div class="setting-option">
                                        <span>自动开播</span>
                                        <SwitchButton v-model="autoplay" activeColor="#00a1d6"></SwitchButton>
                                    </div>
                                    <div class="setting-option">
                                        <span>洗脑循环</span>
                                        <SwitchButton v-model="loop" activeColor="#00a1d6"></SwitchButton>
                                    </div>
                                    <div class="setting-option">
                                        <span>关灯模式</span>
                                        <SwitchButton v-model="offlight" activeColor="#00a1d6"></SwitchButton>
                                    </div>
                                    <div class="setting-option">
                                        <span>镜像画面</span>
                                        <SwitchButton v-model="mirror" activeColor="#00a1d6"></SwitchButton>
                                    </div>
                                </div>
                            </Popover>
                        </div>
                        <!-- 画中画按钮 -->
                        <div class="v-controls-bar-item">
                            <Popover placement="top" mode="to-top" :append="!fullscreen"
                                backgroundColor="rgba(0,0,0,.8)" :top="-26">
                                <div slot="reference">
                                    <div class="v-ctrl ctrl-exit-pip" v-if="sysPip" @click="systemPipOC(false)">
                                        <div class="ctrl-icon">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 88 88" width="88"
                                                height="88" preserveAspectRatio="xMidYMid meet"
                                                style="width: 100%; height: 100%;">
                                                <g clip-path="url(#__lottie_element_103)">
                                                    <g transform="matrix(1,0,0,1,41,41)" opacity="1"
                                                        style="display: block;">
                                                        <g opacity="1" transform="matrix(1,0,0,1,0,0)">
                                                            <path fill="rgb(255,255,255)" fill-opacity="1"
                                                                d=" M26,-28 C30.420000076293945,-28 34,-24.420000076293945 34,-20 C34,-20 34,4 34,4 C34,4 26,4 26,4 C26,4 26,-16.799999237060547 26,-16.799999237060547 C26,-18.56999969482422 24.56999969482422,-20 22.799999237060547,-20 C22.799999237060547,-20 -22.799999237060547,-20 -22.799999237060547,-20 C-24.510000228881836,-20 -25.899999618530273,-18.65999984741211 -25.989999771118164,-16.979999542236328 C-25.989999771118164,-16.979999542236328 -26,-16.799999237060547 -26,-16.799999237060547 C-26,-16.799999237060547 -26,16.799999237060547 -26,16.799999237060547 C-26,18.510000228881836 -24.65999984741211,19.899999618530273 -22.979999542236328,19.989999771118164 C-22.979999542236328,19.989999771118164 -22.799999237060547,20 -22.799999237060547,20 C-22.799999237060547,20 2,20 2,20 C2,20 2,28 2,28 C2,28 -26,28 -26,28 C-30.420000076293945,28 -34,24.420000076293945 -34,20 C-34,20 -34,-20 -34,-20 C-34,-24.420000076293945 -30.420000076293945,-28 -26,-28 C-26,-28 26,-28 26,-28z">
                                                            </path>
                                                        </g>
                                                    </g>
                                                    <g transform="matrix(1,0,0,1,67,65)" opacity="1"
                                                        style="display: block;">
                                                        <g opacity="1" transform="matrix(1,0,0,1,0,0)">
                                                            <path fill="rgb(255,255,255)" fill-opacity="1"
                                                                d=" M16,-8 C16,-8 16,8 16,8 C16,10.208999633789062 14.208999633789062,12 12,12 C12,12 -12,12 -12,12 C-14.208999633789062,12 -16,10.208999633789062 -16,8 C-16,8 -16,-8 -16,-8 C-16,-10.208999633789062 -14.208999633789062,-12 -12,-12 C-12,-12 12,-12 12,-12 C14.208999633789062,-12 16,-10.208999633789062 16,-8z">
                                                            </path>
                                                        </g>
                                                    </g>
                                                    <g transform="matrix(1,0,0,1,30.496000289916992,33.74300003051758)">
                                                        <g opacity="1" transform="matrix(1,0,0,1,0,0)" class="arrow">
                                                            <path fill="rgb(255,255,255)" fill-opacity="1"
                                                                d=" M-4.038000106811523,-9.809000015258789 C-4.038000106811523,-9.809000015258789 2.2820000648498535,-3.499000072479248 2.2820000648498535,-3.499000072479248 C2.2820000648498535,-3.499000072479248 2.2820000648498535,-7.599999904632568 2.2820000648498535,-7.599999904632568 C2.2820000648498535,-8.65999984741211 3.0920000076293945,-9.520000457763672 4.131999969482422,-9.600000381469727 C4.131999969482422,-9.600000381469727 4.2820000648498535,-9.600000381469727 4.2820000648498535,-9.600000381469727 C4.2820000648498535,-9.600000381469727 8.281999588012695,-9.600000381469727 8.281999588012695,-9.600000381469727 C9.331999778747559,-9.600000381469727 10.192000389099121,-8.788999557495117 10.272000312805176,-7.749000072479248 C10.272000312805176,-7.749000072479248 10.281999588012695,-7.599999904632568 10.281999588012695,-7.599999904632568 C10.281999588012695,-7.599999904632568 10.281999588012695,8.399999618530273 10.281999588012695,8.399999618530273 C10.281999588012695,9.449999809265137 9.461999893188477,10.321000099182129 8.432000160217285,10.390999794006348 C8.432000160217285,10.390999794006348 8.281999588012695,10.399999618530273 8.281999588012695,10.399999618530273 C8.281999588012695,10.399999618530273 -7.7179999351501465,10.399999618530273 -7.7179999351501465,10.399999618530273 C-8.777999877929688,10.399999618530273 -9.637999534606934,9.581000328063965 -9.718000411987305,8.550999641418457 C-9.718000411987305,8.550999641418457 -9.718000411987305,8.399999618530273 -9.718000411987305,8.399999618530273 C-9.718000411987305,8.399999618530273 -9.718000411987305,4.400000095367432 -9.718000411987305,4.400000095367432 C-9.718000411987305,3.3399999141693115 -8.907999992370605,2.4800000190734863 -7.868000030517578,2.4000000953674316 C-7.868000030517578,2.4000000953674316 -7.7179999351501465,2.4000000953674316 -7.7179999351501465,2.4000000953674316 C-7.7179999351501465,2.4000000953674316 -3.138000011444092,2.4000000953674316 -3.138000011444092,2.4000000953674316 C-3.138000011444092,2.4000000953674316 -9.687999725341797,-4.159999847412109 -9.687999725341797,-4.159999847412109 C-10.477999687194824,-4.940000057220459 -10.477999687194824,-6.199999809265137 -9.687999725341797,-6.989999771118164 C-9.687999725341797,-6.989999771118164 -6.868000030517578,-9.809000015258789 -6.868000030517578,-9.809000015258789 C-6.078000068664551,-10.598999977111816 -4.817999839782715,-10.598999977111816 -4.038000106811523,-9.809000015258789z">
                                                            </path>
                                                        </g>
                                                    </g>
                                                </g>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="v-ctrl ctrl-pip" v-else @click="systemPipOC(true)">
                                        <div class="ctrl-icon">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 88 88" width="88"
                                                height="88" preserveAspectRatio="xMidYMid meet"
                                                style="width: 100%; height: 100%;">
                                                <g clip-path="url(#__lottie_element_103)">
                                                    <g transform="matrix(1,0,0,1,41,41)" opacity="1"
                                                        style="display: block;">
                                                        <g opacity="1" transform="matrix(1,0,0,1,0,0)">
                                                            <path fill="rgb(255,255,255)" fill-opacity="1"
                                                                d=" M26,-28 C30.420000076293945,-28 34,-24.420000076293945 34,-20 C34,-20 34,4 34,4 C34,4 26,4 26,4 C26,4 26,-16.799999237060547 26,-16.799999237060547 C26,-18.56999969482422 24.56999969482422,-20 22.799999237060547,-20 C22.799999237060547,-20 -22.799999237060547,-20 -22.799999237060547,-20 C-24.510000228881836,-20 -25.899999618530273,-18.65999984741211 -25.989999771118164,-16.979999542236328 C-25.989999771118164,-16.979999542236328 -26,-16.799999237060547 -26,-16.799999237060547 C-26,-16.799999237060547 -26,16.799999237060547 -26,16.799999237060547 C-26,18.510000228881836 -24.65999984741211,19.899999618530273 -22.979999542236328,19.989999771118164 C-22.979999542236328,19.989999771118164 -22.799999237060547,20 -22.799999237060547,20 C-22.799999237060547,20 2,20 2,20 C2,20 2,28 2,28 C2,28 -26,28 -26,28 C-30.420000076293945,28 -34,24.420000076293945 -34,20 C-34,20 -34,-20 -34,-20 C-34,-24.420000076293945 -30.420000076293945,-28 -26,-28 C-26,-28 26,-28 26,-28z">
                                                            </path>
                                                        </g>
                                                    </g>
                                                    <g transform="matrix(1,0,0,1,67,65)" opacity="1"
                                                        style="display: block;">
                                                        <g opacity="1" transform="matrix(1,0,0,1,0,0)">
                                                            <path fill="rgb(255,255,255)" fill-opacity="1"
                                                                d=" M16,-8 C16,-8 16,8 16,8 C16,10.208999633789062 14.208999633789062,12 12,12 C12,12 -12,12 -12,12 C-14.208999633789062,12 -16,10.208999633789062 -16,8 C-16,8 -16,-8 -16,-8 C-16,-10.208999633789062 -14.208999633789062,-12 -12,-12 C-12,-12 12,-12 12,-12 C14.208999633789062,-12 16,-10.208999633789062 16,-8z">
                                                            </path>
                                                        </g>
                                                    </g>
                                                    <g transform="matrix(1,0,0,1,30.496000289916992,33.74300003051758)">
                                                        <g opacity="1" transform="matrix(1,0,0,1,0,0)" class="arrow">
                                                            <path fill="rgb(255,255,255)" fill-opacity="1"
                                                                d=" M-4.038000106811523,-9.809000015258789 C-4.038000106811523,-9.809000015258789 2.2820000648498535,-3.499000072479248 2.2820000648498535,-3.499000072479248 C2.2820000648498535,-3.499000072479248 2.2820000648498535,-7.599999904632568 2.2820000648498535,-7.599999904632568 C2.2820000648498535,-8.65999984741211 3.0920000076293945,-9.520000457763672 4.131999969482422,-9.600000381469727 C4.131999969482422,-9.600000381469727 4.2820000648498535,-9.600000381469727 4.2820000648498535,-9.600000381469727 C4.2820000648498535,-9.600000381469727 8.281999588012695,-9.600000381469727 8.281999588012695,-9.600000381469727 C9.331999778747559,-9.600000381469727 10.192000389099121,-8.788999557495117 10.272000312805176,-7.749000072479248 C10.272000312805176,-7.749000072479248 10.281999588012695,-7.599999904632568 10.281999588012695,-7.599999904632568 C10.281999588012695,-7.599999904632568 10.281999588012695,8.399999618530273 10.281999588012695,8.399999618530273 C10.281999588012695,9.449999809265137 9.461999893188477,10.321000099182129 8.432000160217285,10.390999794006348 C8.432000160217285,10.390999794006348 8.281999588012695,10.399999618530273 8.281999588012695,10.399999618530273 C8.281999588012695,10.399999618530273 -7.7179999351501465,10.399999618530273 -7.7179999351501465,10.399999618530273 C-8.777999877929688,10.399999618530273 -9.637999534606934,9.581000328063965 -9.718000411987305,8.550999641418457 C-9.718000411987305,8.550999641418457 -9.718000411987305,8.399999618530273 -9.718000411987305,8.399999618530273 C-9.718000411987305,8.399999618530273 -9.718000411987305,4.400000095367432 -9.718000411987305,4.400000095367432 C-9.718000411987305,3.3399999141693115 -8.907999992370605,2.4800000190734863 -7.868000030517578,2.4000000953674316 C-7.868000030517578,2.4000000953674316 -7.7179999351501465,2.4000000953674316 -7.7179999351501465,2.4000000953674316 C-7.7179999351501465,2.4000000953674316 -3.138000011444092,2.4000000953674316 -3.138000011444092,2.4000000953674316 C-3.138000011444092,2.4000000953674316 -9.687999725341797,-4.159999847412109 -9.687999725341797,-4.159999847412109 C-10.477999687194824,-4.940000057220459 -10.477999687194824,-6.199999809265137 -9.687999725341797,-6.989999771118164 C-9.687999725341797,-6.989999771118164 -6.868000030517578,-9.809000015258789 -6.868000030517578,-9.809000015258789 C-6.078000068664551,-10.598999977111816 -4.817999839782715,-10.598999977111816 -4.038000106811523,-9.809000015258789z">
                                                            </path>
                                                        </g>
                                                    </g>
                                                </g>
                                            </svg>
                                        </div>

                                    </div>
                                </div>
                                <div class="ctrl-tip-box">
                                    {{ sysPip?'退出画中画': '开启画中画' }}
                                </div>
                            </Popover>
                        </div>
                        <!-- 宽屏模式按钮 -->
                        <div class="v-controls-bar-item" v-show="!fullscreen">
                            <Popover placement="top" mode="to-top" :append="!fullscreen"
                                backgroundColor="rgba(0,0,0,.8)" :top="-26">
                                <div slot="reference">
                                    <div class="v-ctrl ctrl-narrow" v-if="wide" @click="videoWidescreen(false)">
                                        <div class="ctrl-icon">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 88 88" width="88"
                                                height="88" preserveAspectRatio="xMidYMid meet"
                                                style="width: 100%; height: 100%;">
                                                <g clip-path="url(#__lottie_element_131)">
                                                    <g transform="matrix(1,0,0,1,44,44)" opacity="1">
                                                        <g opacity="1" transform="matrix(1,0,0,1,0,0)">
                                                            <path fill="rgb(255,255,255)" fill-opacity="1"
                                                                d=" M19.757999420166016,-12.70199966430664 C19.01799964904785,-13.442000389099121 17.83799934387207,-13.482000350952148 17.058000564575195,-12.821999549865723 C17.058000564575195,-12.821999549865723 16.92799949645996,-12.70199966430664 16.92799949645996,-12.70199966430664 C16.92799949645996,-12.70199966430664 5.618000030517578,-1.3919999599456787 5.618000030517578,-1.3919999599456787 C4.877999782562256,-0.6520000100135803 4.8379998207092285,0.5180000066757202 5.498000144958496,1.3079999685287476 C5.498000144958496,1.3079999685287476 5.618000030517578,1.437999963760376 5.618000030517578,1.437999963760376 C5.618000030517578,1.437999963760376 16.92799949645996,12.748000144958496 16.92799949645996,12.748000144958496 C17.667999267578125,13.48799991607666 18.83799934387207,13.527999877929688 19.628000259399414,12.868000030517578 C19.628000259399414,12.868000030517578 19.757999420166016,12.748000144958496 19.757999420166016,12.748000144958496 C19.757999420166016,12.748000144958496 22.58799934387207,9.918000221252441 22.58799934387207,9.918000221252441 C23.327999114990234,9.178000450134277 23.368000030517578,8.008000373840332 22.697999954223633,7.2179999351501465 C22.697999954223633,7.2179999351501465 22.58799934387207,7.0879998207092285 22.58799934387207,7.0879998207092285 C22.58799934387207,7.0879998207092285 15.517999649047852,0.017999999225139618 15.517999649047852,0.017999999225139618 C15.517999649047852,0.017999999225139618 22.58799934387207,-7.052000045776367 22.58799934387207,-7.052000045776367 C23.327999114990234,-7.791999816894531 23.368000030517578,-8.961999893188477 22.697999954223633,-9.751999855041504 C22.697999954223633,-9.751999855041504 22.58799934387207,-9.881999969482422 22.58799934387207,-9.881999969482422 C22.58799934387207,-9.881999969482422 19.757999420166016,-12.70199966430664 19.757999420166016,-12.70199966430664z M-19.761999130249023,-12.70199966430664 C-19.761999130249023,-12.70199966430664 -22.582000732421875,-9.881999969482422 -22.582000732421875,-9.881999969482422 C-23.371999740600586,-9.092000007629395 -23.371999740600586,-7.831999778747559 -22.582000732421875,-7.052000045776367 C-22.582000732421875,-7.052000045776367 -15.51200008392334,0.017999999225139618 -15.51200008392334,0.017999999225139618 C-15.51200008392334,0.017999999225139618 -22.582000732421875,7.0879998207092285 -22.582000732421875,7.0879998207092285 C-23.371999740600586,7.877999782562256 -23.371999740600586,9.137999534606934 -22.582000732421875,9.918000221252441 C-22.582000732421875,9.918000221252441 -19.761999130249023,12.748000144958496 -19.761999130249023,12.748000144958496 C-18.972000122070312,13.527999877929688 -17.711999893188477,13.527999877929688 -16.93199920654297,12.748000144958496 C-16.93199920654297,12.748000144958496 -5.611999988555908,1.437999963760376 -5.611999988555908,1.437999963760376 C-4.831999778747559,0.6579999923706055 -4.831999778747559,-0.6119999885559082 -5.611999988555908,-1.3919999599456787 C-5.611999988555908,-1.3919999599456787 -16.93199920654297,-12.70199966430664 -16.93199920654297,-12.70199966430664 C-17.711999893188477,-13.491999626159668 -18.972000122070312,-13.491999626159668 -19.761999130249023,-12.70199966430664z M28,-28 C32.41999816894531,-28 36,-24.420000076293945 36,-20 C36,-20 36,20 36,20 C36,24.420000076293945 32.41999816894531,28 28,28 C28,28 -28,28 -28,28 C-32.41999816894531,28 -36,24.420000076293945 -36,20 C-36,20 -36,-20 -36,-20 C-36,-24.420000076293945 -32.41999816894531,-28 -28,-28 C-28,-28 28,-28 28,-28z">
                                                            </path>
                                                        </g>
                                                    </g>
                                                </g>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="v-ctrl ctrl-wide" v-else @click="videoWidescreen(true)">
                                        <div class="ctrl-icon">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 88 88" width="88"
                                                height="88" preserveAspectRatio="xMidYMid meet"
                                                style="width: 100%; height: 100%;">
                                                <g clip-path="url(#__lottie_element_126)">
                                                    <g transform="matrix(1,0,0,1,44,44)" opacity="1"
                                                        style="display: block;">
                                                        <g opacity="1" transform="matrix(1,0,0,1,0,0)">
                                                            <path fill="rgb(255,255,255)" fill-opacity="1"
                                                                d=" M12.437999725341797,-12.70199966430664 C12.437999725341797,-12.70199966430664 9.618000030517578,-9.881999969482422 9.618000030517578,-9.881999969482422 C8.82800006866455,-9.092000007629395 8.82800006866455,-7.831999778747559 9.618000030517578,-7.052000045776367 C9.618000030517578,-7.052000045776367 16.687999725341797,0.017999999225139618 16.687999725341797,0.017999999225139618 C16.687999725341797,0.017999999225139618 9.618000030517578,7.0879998207092285 9.618000030517578,7.0879998207092285 C8.82800006866455,7.877999782562256 8.82800006866455,9.137999534606934 9.618000030517578,9.918000221252441 C9.618000030517578,9.918000221252441 12.437999725341797,12.748000144958496 12.437999725341797,12.748000144958496 C13.227999687194824,13.527999877929688 14.48799991607666,13.527999877929688 15.267999649047852,12.748000144958496 C15.267999649047852,12.748000144958496 26.58799934387207,1.437999963760376 26.58799934387207,1.437999963760376 C27.368000030517578,0.6579999923706055 27.368000030517578,-0.6119999885559082 26.58799934387207,-1.3919999599456787 C26.58799934387207,-1.3919999599456787 15.267999649047852,-12.70199966430664 15.267999649047852,-12.70199966430664 C14.48799991607666,-13.491999626159668 13.227999687194824,-13.491999626159668 12.437999725341797,-12.70199966430664z M-12.442000389099121,-12.70199966430664 C-13.182000160217285,-13.442000389099121 -14.362000465393066,-13.482000350952148 -15.142000198364258,-12.821999549865723 C-15.142000198364258,-12.821999549865723 -15.272000312805176,-12.70199966430664 -15.272000312805176,-12.70199966430664 C-15.272000312805176,-12.70199966430664 -26.582000732421875,-1.3919999599456787 -26.582000732421875,-1.3919999599456787 C-27.32200050354004,-0.6520000100135803 -27.36199951171875,0.5180000066757202 -26.70199966430664,1.3079999685287476 C-26.70199966430664,1.3079999685287476 -26.582000732421875,1.437999963760376 -26.582000732421875,1.437999963760376 C-26.582000732421875,1.437999963760376 -15.272000312805176,12.748000144958496 -15.272000312805176,12.748000144958496 C-14.531999588012695,13.48799991607666 -13.362000465393066,13.527999877929688 -12.571999549865723,12.868000030517578 C-12.571999549865723,12.868000030517578 -12.442000389099121,12.748000144958496 -12.442000389099121,12.748000144958496 C-12.442000389099121,12.748000144958496 -9.612000465393066,9.918000221252441 -9.612000465393066,9.918000221252441 C-8.871999740600586,9.178000450134277 -8.831999778747559,8.008000373840332 -9.501999855041504,7.2179999351501465 C-9.501999855041504,7.2179999351501465 -9.612000465393066,7.0879998207092285 -9.612000465393066,7.0879998207092285 C-9.612000465393066,7.0879998207092285 -16.68199920654297,0.017999999225139618 -16.68199920654297,0.017999999225139618 C-16.68199920654297,0.017999999225139618 -9.612000465393066,-7.052000045776367 -9.612000465393066,-7.052000045776367 C-8.871999740600586,-7.791999816894531 -8.831999778747559,-8.961999893188477 -9.501999855041504,-9.751999855041504 C-9.501999855041504,-9.751999855041504 -9.612000465393066,-9.881999969482422 -9.612000465393066,-9.881999969482422 C-9.612000465393066,-9.881999969482422 -12.442000389099121,-12.70199966430664 -12.442000389099121,-12.70199966430664z M28,-28 C32.41999816894531,-28 36,-24.420000076293945 36,-20 C36,-20 36,20 36,20 C36,24.420000076293945 32.41999816894531,28 28,28 C28,28 -28,28 -28,28 C-32.41999816894531,28 -36,24.420000076293945 -36,20 C-36,20 -36,-20 -36,-20 C-36,-24.420000076293945 -32.41999816894531,-28 -28,-28 C-28,-28 28,-28 28,-28z">
                                                            </path>
                                                        </g>
                                                    </g>
                                                </g>
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                                <div class="ctrl-tip-box">
                                    {{ wide?'退出宽屏': '宽屏模式' }}
                                </div>
                            </Popover>
                        </div>
                        <!-- 全屏按钮 -->
                        <div class="v-controls-bar-item">
                            <Popover placement="top" mode="to-top" :append="!fullscreen"
                                backgroundColor="rgba(0,0,0,.8)" :top="-26">
                                <div slot="reference"
                                    :class="{ 'v-ctrl': true, 'ctrl-full': !fullscreen, 'ctrl-exit-full': fullscreen }"
                                    @click="videoFullscreen(!fullscreen)">
                                    <div class="ctrl-icon">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 88 88" width="88"
                                            height="88" preserveAspectRatio="xMidYMid meet"
                                            style="width: 100%; height: 100%;">
                                            <defs>
                                                <clipPath id="__lottie_element_146">
                                                    <rect width="88" height="88" x="0" y="0"></rect>
                                                </clipPath>
                                            </defs>
                                            <g clip-path="url(#__lottie_element_146)">
                                                <g transform="matrix(1,0,0,1,44,66.322998046875)" opacity="1"
                                                    style="display: block;">
                                                    <g opacity="1" transform="matrix(1,0,0,1,0,0)" class="m1">
                                                        <path fill="rgb(255,255,255)" fill-opacity="1"
                                                            d=" M8.319000244140625,-13.677000045776367 C8.319000244140625,-13.677000045776367 19.2189998626709,8.123000144958496 19.2189998626709,8.123000144958496 C13.659000396728516,11.642999649047852 7.068999767303467,13.67300033569336 -0.0010000000474974513,13.67300033569336 C-7.071000099182129,13.67300033569336 -13.66100025177002,11.642999649047852 -19.22100067138672,8.123000144958496 C-19.22100067138672,8.123000144958496 -8.321000099182129,-13.677000045776367 -8.321000099182129,-13.677000045776367 C-6.160999774932861,-11.597000122070312 -3.2309999465942383,-10.32699966430664 -0.0010000000474974513,-10.32699966430664 C3.2290000915527344,-10.32699966430664 6.169000148773193,-11.597000122070312 8.319000244140625,-13.677000045776367z">
                                                        </path>
                                                    </g>
                                                </g>
                                                <g transform="matrix(1,0,0,1,64.68399810791016,27.89699935913086)"
                                                    opacity="1" style="display: block;">
                                                    <g opacity="1" transform="matrix(1,0,0,1,0,0)" class="m2">
                                                        <path fill="rgb(255,255,255)" fill-opacity="1"
                                                            d=" M15.314000129699707,16.10700035095215 C15.314000129699707,16.10700035095215 -8.685999870300293,16.10700035095215 -8.685999870300293,16.10700035095215 C-8.685999870300293,11.406999588012695 -11.38599967956543,7.336999893188477 -15.315999984741211,5.367000102996826 C-15.315999984741211,5.367000102996826 -4.576000213623047,-16.10300064086914 -4.576000213623047,-16.10300064086914 C7.214000225067139,-10.192999839782715 15.314000129699707,2.006999969482422 15.314000129699707,16.10700035095215z">
                                                        </path>
                                                    </g>
                                                </g>
                                                <g transform="matrix(1,0,0,1,23.31599998474121,27.89699935913086)"
                                                    opacity="1" style="display: block;">
                                                    <g opacity="1" transform="matrix(1,0,0,1,0,0)" class="m3">
                                                        <path fill="rgb(255,255,255)" fill-opacity="1"
                                                            d=" M4.584000110626221,-16.10300064086914 C4.584000110626221,-16.10300064086914 15.314000129699707,5.367000102996826 15.314000129699707,5.367000102996826 C11.383999824523926,7.336999893188477 8.684000015258789,11.406999588012695 8.684000015258789,16.10700035095215 C8.684000015258789,16.10700035095215 -15.315999984741211,16.10700035095215 -15.315999984741211,16.10700035095215 C-15.315999984741211,2.006999969482422 -7.216000080108643,-10.192999839782715 4.584000110626221,-16.10300064086914z">
                                                        </path>
                                                    </g>
                                                </g>
                                                <g transform="matrix(1,0,0,1,44,44)" opacity="1"
                                                    style="display: block;">
                                                    <g opacity="1" transform="matrix(1,0,0,1,0,0)" class="cen">
                                                        <path fill="rgb(255,255,255)" fill-opacity="1"
                                                            d=" M0,-4 C2.140000104904175,-4 3.890000104904175,-2.319999933242798 4,-0.20000000298023224 C4,-0.20000000298023224 4,0 4,0 C4,0 4,0.20000000298023224 4,0.20000000298023224 C3.890000104904175,2.319999933242798 2.140000104904175,4 0,4 C-2.2100000381469727,4 -4,2.2100000381469727 -4,0 C-4,-2.2100000381469727 -2.2100000381469727,-4 0,-4z">
                                                        </path>
                                                    </g>
                                                </g>
                                            </g>
                                        </svg>
                                    </div>
                                </div>
                                <div class="ctrl-tip-box">
                                    {{ fullscreen?'退出': '全屏' }}
                                </div>
                            </Popover>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 视频播放按钮 -->
            <transition name="opac">
                <div class="v-play-icon" :class="{ 'v-play-icon-fullscreen': fullscreen }"
                    :style="{ backgroundImage: `url(${(play && pipOpenState) ? require('@/assets/images/videoplayer/pause.svg') : require('@/assets/images/videoplayer/play.svg')})` }"
                    v-show="!play || pipmouseenter" @click.stop="videoPlayPause" key="pip-play-icon"></div>
            </transition>

            <!-- 画中画关闭按钮 -->
            <transition name="opac">
                <div class="v-pip-close" v-show="pipmouseenter" @click="pipClose" key="pip-close">
                    <i class="iconfont icon-guanbi"></i>
                </div>
            </transition>

            <!-- 音量调节提示 -->
            <transition name="opac">
                <div class="v-key-volume" v-show="keyVolummeVisible">
                    <div class="icon">
                        <svg v-if="volume != 0 && !muted" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 88 88"
                            width="88" height="88" preserveAspectRatio="xMidYMid meet"
                            style="width: 100%; height: 100%;">
                            <g clip-path="url(#__lottie_element_331)">
                                <g clip-path="url(#__lottie_element_333)" transform="matrix(1,0,0,1,0,0)" opacity="1"
                                    style="display: block;">
                                    <g class="v1" transform="matrix(1,0,0,1,28,44)" opacity="1" style="display: block;">
                                        <g opacity="1" transform="matrix(1,0,0,1,0,0)">
                                            <path fill="rgb(0,0,0)" fill-opacity="1"
                                                d=" M15.5600004196167,-25.089000701904297 C15.850000381469727,-24.729000091552734 16,-24.288999557495117 16,-23.839000701904297 C16,-23.839000701904297 16,23.840999603271484 16,23.840999603271484 C16,24.94099998474121 15.100000381469727,25.840999603271484 14,25.840999603271484 C13.550000190734863,25.840999603271484 13.109999656677246,25.680999755859375 12.75,25.400999069213867 C12.75,25.400999069213867 -4,12.00100040435791 -4,12.00100040435791 C-4,12.00100040435791 -8,12.00100040435791 -8,12.00100040435791 C-12.420000076293945,12.00100040435791 -16,8.420999526977539 -16,4.000999927520752 C-16,4.000999927520752 -16,-3.999000072479248 -16,-3.999000072479248 C-16,-8.418999671936035 -12.420000076293945,-11.99899959564209 -8,-11.99899959564209 C-8,-11.99899959564209 -4,-11.99899959564209 -4,-11.99899959564209 C-4,-11.99899959564209 12.75,-25.39900016784668 12.75,-25.39900016784668 C13.609999656677246,-26.089000701904297 14.869999885559082,-25.948999404907227 15.5600004196167,-25.089000701904297z">
                                            </path>
                                        </g>
                                    </g>
                                    <g class="v2" transform="matrix(0.9999999403953552,0,0,0.9999999403953552,56,44)"
                                        opacity="1" style="display: block;">
                                        <g opacity="1" transform="matrix(1,0,0,1,0,0)">
                                            <path fill="rgb(0,0,0)" fill-opacity="1"
                                                d=" M-4,-13.859000205993652 C0.7799999713897705,-11.08899974822998 4,-5.919000148773193 4,0.0010000000474974513 C4,5.921000003814697 0.7799999713897705,11.090999603271484 -4,13.861000061035156 C-4,13.861000061035156 -4,-13.859000205993652 -4,-13.859000205993652z">
                                            </path>
                                        </g>
                                    </g>
                                    <g class="v3"
                                        transform="matrix(0.9999999403953552,0,0,0.9999999403953552,64.01399993896484,44.00699996948242)"
                                        opacity="1" style="display: block;">
                                        <g opacity="1" transform="matrix(1,0,0,1,0,0)">
                                            <path fill="rgb(0,0,0)" fill-opacity="1"
                                                d=" M-6.236000061035156,-28.895999908447266 C4.803999900817871,-23.615999221801758 11.984000205993652,-12.456000328063965 11.984000205993652,-0.006000000052154064 C11.984000205993652,12.454000473022461 4.794000148773193,23.624000549316406 -6.265999794006348,28.893999099731445 C-8.255999565124512,29.8439998626709 -10.645999908447266,29.003999710083008 -11.595999717712402,27.003999710083008 C-12.545999526977539,25.013999938964844 -11.696000099182129,22.624000549316406 -9.706000328063965,21.673999786376953 C-1.406000018119812,17.724000930786133 3.9839999675750732,9.343999862670898 3.9839999675750732,-0.006000000052154064 C3.9839999675750732,-9.345999717712402 -1.3960000276565552,-17.715999603271484 -9.675999641418457,-21.676000595092773 C-11.675999641418457,-22.625999450683594 -12.515999794006348,-25.016000747680664 -11.565999984741211,-27.006000518798828 C-10.616000175476074,-29.006000518798828 -8.22599983215332,-29.84600067138672 -6.236000061035156,-28.895999908447266z">
                                            </path>
                                        </g>
                                    </g>
                                </g>
                            </g>
                        </svg>
                        <svg v-else xmlns="http://www.w3.org/2000/svg" viewBox="0 0 88 88" width="88" height="88"
                            preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%;">
                            <defs>
                                <clipPath id="__lottie_element_86">
                                    <rect width="88" height="88" x="0" y="0"></rect>
                                </clipPath>
                                <filter id="__lottie_element_91" filterUnits="objectBoundingBox" x="0%" y="0%"
                                    width="100%" height="100%">
                                    <feComponentTransfer in="SourceGraphic">
                                        <feFuncA type="table" tableValues="1.0 0.0"></feFuncA>
                                    </feComponentTransfer>
                                </filter>
                                <mask id="__lottie_element_90" mask-type="alpha">
                                    <g filter="url(#__lottie_element_91)">
                                        <rect width="88" height="88" x="0" y="0" fill="#ffffff" opacity="0"></rect>
                                        <g transform="matrix(1,0,0,1,47.422000885009766,41.702999114990234)" opacity="1"
                                            style="display: block;">
                                            <g opacity="1" transform="matrix(1,0,0,1,-0.5,-0.5)">
                                                <path fill="rgb(0,0,0)" fill-opacity="1"
                                                    d=" M-33.94157409667969,-28.281574249267578 C-35.50258255004883,-29.84258270263672 -35.50258255004883,-32.377418518066406 -33.94157409667969,-33.93842697143555 C-33.94157409667969,-33.93842697143555 -33.93842697143555,-33.94157409667969 -33.93842697143555,-33.94157409667969 C-32.377418518066406,-35.50258255004883 -29.84258270263672,-35.50258255004883 -28.281574249267578,-33.94157409667969 C-28.281574249267578,-33.94157409667969 33.94157409667969,28.281574249267578 33.94157409667969,28.281574249267578 C35.50258255004883,29.84258270263672 35.50258255004883,32.377418518066406 33.94157409667969,33.93842697143555 C33.94157409667969,33.93842697143555 33.93842697143555,33.94157409667969 33.93842697143555,33.94157409667969 C32.377418518066406,35.50258255004883 29.84258270263672,35.50258255004883 28.281574249267578,33.94157409667969 C28.281574249267578,33.94157409667969 -33.94157409667969,-28.281574249267578 -33.94157409667969,-28.281574249267578z">
                                                </path>
                                            </g>
                                        </g>
                                    </g>
                                </mask>
                            </defs>
                            <g clip-path="url(#__lottie_element_86)">
                                <g mask="url(#__lottie_element_90)" style="display: block;" class="horn">
                                    <g transform="matrix(1,0,0,1,44,44)" opacity="1">
                                        <g opacity="1" transform="matrix(1,0,0,1,0,0)">
                                            <path fill="rgb(0,0,0)" fill-opacity="1"
                                                d=" M-0.4399999976158142,-25.09600067138672 C-0.15000000596046448,-24.736000061035156 0,-24.29599952697754 0,-23.84600067138672 C0,-23.84600067138672 0,23.833999633789062 0,23.833999633789062 C0,24.93400001525879 -0.8999999761581421,25.833999633789062 -2,25.833999633789062 C-2.450000047683716,25.833999633789062 -2.890000104904175,25.673999786376953 -3.25,25.393999099731445 C-3.25,25.393999099731445 -20,11.994000434875488 -20,11.994000434875488 C-20,11.994000434875488 -24,11.994000434875488 -24,11.994000434875488 C-28.420000076293945,11.994000434875488 -32,8.413999557495117 -32,3.99399995803833 C-32,3.99399995803833 -32,-4.00600004196167 -32,-4.00600004196167 C-32,-8.425999641418457 -28.420000076293945,-12.005999565124512 -24,-12.005999565124512 C-24,-12.005999565124512 -20,-12.005999565124512 -20,-12.005999565124512 C-20,-12.005999565124512 -3.25,-25.4060001373291 -3.25,-25.4060001373291 C-2.390000104904175,-26.09600067138672 -1.1299999952316284,-25.95599937438965 -0.4399999976158142,-25.09600067138672z M13.777999877929688,-28.895999908447266 C24.81800079345703,-23.615999221801758 31.99799919128418,-12.456000328063965 31.99799919128418,-0.006000000052154064 C31.99799919128418,12.454000473022461 24.808000564575195,23.624000549316406 13.748000144958496,28.893999099731445 C11.758000373840332,29.8439998626709 9.368000030517578,29.003999710083008 8.418000221252441,27.003999710083008 C7.4679999351501465,25.013999938964844 8.317999839782715,22.624000549316406 10.307999610900879,21.673999786376953 C18.607999801635742,17.724000930786133 23.99799919128418,9.343999862670898 23.99799919128418,-0.006000000052154064 C23.99799919128418,-9.345999717712402 18.618000030517578,-17.715999603271484 10.338000297546387,-21.676000595092773 C8.338000297546387,-22.625999450683594 7.498000144958496,-25.016000747680664 8.447999954223633,-27.006000518798828 C9.39799976348877,-29.006000518798828 11.788000106811523,-29.84600067138672 13.777999877929688,-28.895999908447266z M8,-13.866000175476074 C12.779999732971191,-11.095999717712402 16,-5.926000118255615 16,-0.006000000052154064 C16,5.914000034332275 12.779999732971191,11.083999633789062 8,13.854000091552734 C8,13.854000091552734 8,-13.866000175476074 8,-13.866000175476074z">
                                            </path>
                                        </g>
                                    </g>
                                </g>
                                <g transform="matrix(1,0,0,1,41.172000885009766,46.827999114990234)" opacity="1"
                                    style="display: block;">
                                    <g opacity="1" transform="matrix(1,0,0,1,-0.5,-0.5)">
                                        <path fill="rgb(0,0,0)" fill-opacity="1"
                                            d=" M-33.94157409667969,-28.281574249267578 C-35.50258255004883,-29.84258270263672 -35.50258255004883,-32.377418518066406 -33.94157409667969,-33.93842697143555 C-33.94157409667969,-33.93842697143555 -33.93842697143555,-33.94157409667969 -33.93842697143555,-33.94157409667969 C-32.377418518066406,-35.50258255004883 -29.84258270263672,-35.50258255004883 -28.281574249267578,-33.94157409667969 C-28.281574249267578,-33.94157409667969 33.94157409667969,28.281574249267578 33.94157409667969,28.281574249267578 C35.50258255004883,29.84258270263672 35.50258255004883,32.377418518066406 33.94157409667969,33.93842697143555 C33.94157409667969,33.93842697143555 33.93842697143555,33.94157409667969 33.93842697143555,33.94157409667969 C32.377418518066406,35.50258255004883 29.84258270263672,35.50258255004883 28.281574249267578,33.94157409667969 C28.281574249267578,33.94157409667969 -33.94157409667969,-28.281574249267578 -33.94157409667969,-28.281574249267578z">
                                        </path>
                                    </g>
                                </g>
                            </g>
                        </svg>
                    </div>
                    <div class="volume-per">
                        {{ volume }}%
                    </div>
                </div>
            </transition>

            <!-- 画中画缩放区 -->
            <div class="v-player-left-area" v-show="pipOpenState" @mousedown="pipResizeStart($event, 'lt')"></div>
            <div class="v-player-top-left-area" v-show="pipOpenState" @mousedown="pipResizeStart($event, 'lt')"></div>
            <div class="v-player-right-area" v-show="pipOpenState" @mousedown="pipResizeStart($event, 'rb')"></div>
            <div class="v-player-top-right-area" v-show="pipOpenState" @mousedown="pipResizeStart($event, 'rt')"></div>
            <div class="v-player-top-area" v-show="pipOpenState" @mousedown="pipResizeStart($event, 't')"></div>

            <slot></slot>
        </div>

    </div>
</template>

<script>

import Popover from '@/components/Common/Popover'
import SwitchButton from '@/components/Common/Button/SwitchButton'
import Slider from '@/components/Common/Slider'
import getTime from '@/utils/timeFormat'

import VideoPreview from '@/utils/videoPreview'

export default {
    name: 'VieoPlayer',
    components: {
        Popover, SwitchButton, Slider
    },
    props: {
        videoSrc: {
            type: String,
            default: ''
        },
        borderRadius: {
            type: String,
            default: '6px'
        },
        pipAuto: {
            type: Boolean,
            default: JSON.parse(localStorage.getItem('pipAuto')),
        },
        previewImg: {
            type: Boolean,
            default: true
        }
    },
    emits: ['end', 'play', 'videoAppear', 'videoDisappear', 'pipOpen', 'pipClose', 'widescreen'],
    data() {
        return {
            vMutedTip: false,                       //静音提示显示状态
            pipmouseenter: false,

            //画中画开启状态
            pipOpenState: false,
            //画中画样式
            pipWidth: 320,
            pipHeight: 180,
            pipBottom: '',
            pipRight: '',

            playerBoxStyle: {
                '--border-radius': this.borderRadius,
            },

            //控制条状态数据
            isControlsBarShow: false,
            play: false,                            //视频播放状态
            volume: JSON.parse(localStorage.getItem('v-player-setting-volume')) === null ? 100 : JSON.parse(localStorage.getItem('v-player-setting-volume')),
            muted: false,
            playbackRate: 1,
            loop: false,
            mirror: false,
            autoplay: JSON.parse(localStorage.getItem('v-player-setting-autoplay')) === null ? true : JSON.parse(localStorage.getItem('v-player-setting-autoplay')),
            sysPip: false,
            wide: false,
            fullscreen: false,
            currentTime: 0,
            time: 0,
            currentTimeFormat: '00:00',
            timeFormat: '00:00',
            preTime: '00:00',
            progress: '0%',
            buffered: '0%',
            progressPopupLeft: 0,
            pvisible: undefined,
            quality: 4,
            qualityObj: {
                '1': '360P 流畅',
                '2': '480P 清晰',
                '3': '720P 高清',
                '4': '1080P 高清',
                '5': '1080P 高码率',
            },
            offlight: false,
            previmg: '',
            keyVolummeVisible: false
        }
    },
    computed: {
        vPlayerStyle() {
            return {
                width: this.pipWidth + 'px',
                height: this.pipHeight + 'px',
                bottom: this.pipBottom + 'px',
                right: this.pipRight + 'px'
            }
        }
    },
    watch: {
        vMutedTip(val) {
            if (!val) {
                this.vMutedTipFirst = true
            } else {
                setTimeout(() => {
                    this.vMutedTip = false
                }, 8000);
            }
        },
        pipAuto(val) {
            if (val) {
                localStorage.setItem('pipAuto', JSON.stringify(true))
                this.pipOpen()
            } else {
                localStorage.setItem('pipAuto', JSON.stringify(false))
                this.pipClose()
            }
        },
        $route() {
            this.vMutedTipFirst = false
            this.firstPlay = false
            this.mirror = false
            this.playbackRate = 1
            this.videoMutedTip && this.videoMutedTip.closeAll()
        },
        volume(val) {
            this.$refs.video.volume = val / 100
            this.muted && (this.muted = false)
            localStorage.setItem('v-player-setting-volume', val + '')
        },
        muted(val) {
            this.$refs.video.muted = val
        },
        playbackRate(val) {
            this.$refs.video.playbackRate = val
        },
        autoplay(val) {
            localStorage.setItem('v-player-setting-autoplay', val + '')
        },
        loop(val) {
            this.$refs.video.loop = val
        }

    },
    methods: {



        /**
         * 数据初始化
         */
        Init() {
            this.playerEventListenerInit()
            this.IntersectionObserverInit()
            this.videoLoading()
            this.$refs.video.volume = this.volume / 100
            this.$refs.video.controls = false
        },

        //视频播放器事件函数


        //设置video事件
        playerEventListenerInit() {

            //视频加载失败
            this.$refs.video.addEventListener('error', (e) => {
                //加载重试
                setTimeout(() => {
                    this.$refs.video.load()
                    this.$refs.video.currentTime = this.currentTime
                }, 3000)
            })

            //监听视频播放/暂停事件
            this.$refs.video.addEventListener('play', (e) => {
                this.play = true
                this.videoMutedTipInit()
                this.videoLoadingClose()
                this.$emit('play')
            })

            //监听视频暂停事件
            this.$refs.video.addEventListener('pause', () => {
                this.play = false
                this.videoLoadingClose()
            })

            //监听视频结束事件
            this.$refs.video.addEventListener('ended', () => {
                this.$emit('end')
            })

            //监听视频等待事件
            this.$refs.video.addEventListener('waiting', () => {
                this.videoLoading()
            })

            //监听视频可以播放事件
            this.$refs.video.addEventListener('canplay', () => {
                this.videoLoadingClose()

                if (!this.firstPlay && !this.autoplay) return this.firstPlay = 1

                this.videoPlay()

            })

            // 进入画中画模式时候执行
            this.$refs.video.addEventListener('enterpictureinpicture', () => {
                this.defaultPipState = true
            })

            // 退出画中画模式时候执行
            this.$refs.video.addEventListener('leavepictureinpicture', () => {
                this.defaultPipState = false
            })

            //视频开始加载
            this.$refs.video.addEventListener('loadstart', () => {
                this.videoLoading()
                this.timeFormat = '00:00'
                this.timeFormat = '00:00'
            })

            this.videoDurationHour = false
            //视频获取到视频数据
            this.$refs.video.addEventListener('loadedmetadata', (e) => {
                //获取视频时长
                this.time = Math.floor(this.$refs.video.duration)
                this.timeFormat = getTime(this.time, 'random')

                //判断视频时长是否超过一小时，用于时间格式化
                this.videoDurationHour = this.timeFormat.split(":").length >= 3
                if (this.videoDurationHour) this.currentTimeFormat = getTime(this.currentTime, this.videoDurationHour)
                else this.currentTimeFormat = getTime(this.currentTime, 'random')

                //创建videoPreview，用于视频预览图预览
                this.videoPreview = new VideoPreview({ row: 10, column: 10, interval: 5 })

                //temp
                const names = this.videoSrc.split('/')
                this.videoName = names[names.length - 1].split('.')[0]
            })

            //video播放时间更新
            this.$refs.video.addEventListener('timeupdate', (e) => {
                //更新当前视频播放时间
                this.currentTime = Math.floor(this.$refs.video.currentTime)
                this.currentTime > this.time && (this.currentTime = this.time)
                this.currentTimeFormat = getTime(this.currentTime, this.videoDurationHour)

                //更新播放进度条和缓存进度条的长度
                !this.progressbartouchstart && !this.progressbarmousedown && (this.progress = this.$refs.video.currentTime / this.time * 100 + '%')
                this.$refs.video.buffered.length && (this.buffered = Math.floor(this.$refs.video.buffered.end(this.$refs.video.buffered.length - 1)) / this.time * 100 + '%')

            })

            //空格键控制视频暂停/播放
            window.addEventListener('keydown', this.keySpacePausePlay)

            //上下方向键控制音量
            window.addEventListener('keydown', this.keySetVolume)
        },

        /**
         * 播放视频
         */
        videoPlay() {
            this.$refs.video.play().then(res => {
            }).catch(err => {
                this.muted = true
                setImmediate(() => {
                    this.$refs.video.play()
                })
            })
        },
        /**
         * 暂停视频播放
         */
        videoPause() {
            this.$refs.video.pause()
        },
        //视频播放/暂停
        videoPlayPause() {
            if (!this.vMutedTipFirst) this.closeVideoMuted()
            if (this.play) this.videoPause()
            else this.videoPlay()
        },


        //视频播放静音提示
        videoMutedTipInit() {
            if (!this.vMutedTipFirst && this.muted) {
                this.vMutedTipFirst = true
                let uuid = `${Math.ceil(Math.random() * 100000)}-${Math.ceil(Math.random() * 100000)}`
                crypto && crypto.randomUUID && (uuid = crypto.randomUUID())

                this.videoMutedTip = this.$msg({
                    container: this.$refs.vPlayer,
                    msg: `<div class="v-tip">
                            视频已静音播放，
                            <span id="recoveryVolume-${uuid}">
                                点击恢复音量
                            </span>
                        </div>`,
                    showClose: true,
                    bottom: 66,
                    left: 16,
                    padding: '10px 12px',
                    duration: 8000
                })
                setImmediate(() => {
                    const v = document.querySelector(`#recoveryVolume-${uuid}`)
                    if (v) {
                        v.onclick = this.closeVideoMuted
                    }
                })
            }
        },
        videoMutedSetting(value) {
            this.muted = value
        },
        // 关闭视频静音及静音提示
        closeVideoMuted() {
            this.muted = false
            this.videoMutedTip && this.videoMutedTip.close()
        },

        //视频等待动画
        videoLoading() {
            if (!this.vloading && !this.vloadingTimeout) {
                this.vloadingTimeout = setTimeout(() => {
                    this.vloading = this.$loading({
                        text: '正在缓冲...',
                        container: this.$refs.vPlayer,
                        mask: false,
                        textAnima: 'gradient'
                    })
                }, 2000)
            }
        },
        videoLoadingClose() {
            this.vloadingTimeout && clearTimeout(this.vloadingTimeout)
            this.vloading && this.vloading.close()
            this.vloading = null
            this.vloadingTimeout = null
        },

        //视频宽屏模式
        videoWidescreen(val) {
            let w, h
            if (val) {
                const innerHeight = window.innerHeight || document.documentElement.clientHeight
                const innerWidth = window.innerWidth || document.documentElement.clientWidth
                if (innerWidth > innerHeight) {
                    h = innerHeight * 0.77
                    if (h < 546) h = 546
                    w = h * 1.778
                } else {
                    w = innerWidth * 0.85
                    if (w > 2540) w = 2540
                    if (w < 976) w = 976
                    h = w * 0.5625
                }
            }
            this.$emit('widescreen', w, h, val)
            this.wide = val
        },
        //视频全屏模式
        videoFullscreen(val) {
            if (val) {
                const setEvent = (e, val) => {
                    const fullscreenchangeEventFunc = () => {
                        if (val) {
                            if (!document.webkitFullscreenElement) {
                                this.fullscreen = false
                                this.$refs.vPlayer.removeEventListener(e, fullscreenchangeEventFunc)
                            } else {
                                this.fullscreen = true
                            }
                        } else {
                            if (!document.fullscreenElement) {
                                this.fullscreen = false
                                this.$refs.vPlayer.removeEventListener(e, fullscreenchangeEventFunc)
                            } else {
                                this.fullscreen = true
                            }
                        }
                    }
                    this.$refs.vPlayer.addEventListener(e, fullscreenchangeEventFunc)
                }

                if (this.$refs.vPlayer.requestFullscreen) {
                    this.$refs.vPlayer.requestFullscreen().then(res => {
                        this.fullscreen = true
                        setEvent('fullscreenchange', false)
                    })
                } else if (this.$refs.vPlayer.webkitRequestFullscreen) {
                    setEvent('webkitfullscreenchange', true)
                    this.$refs.vPlayer.webkitRequestFullscreen()
                }
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen().then(res => {
                        this.fullscreen = false
                    })
                } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen()
                }
            }
        },

        //播放器鼠标点击，touch事件函数

        videoPlayerMouseenter() {
            //画中画鼠标进入事件，显示画中画关闭按钮
            if (this.pipOpenState) this.pipmouseenter = true
        },
        videoPlayerMousedown(e) {
            e.stopPropagation()
            e.preventDefault()
            this.pipMousedown(e)
        },
        videoPlayerMousemove() {
            this.controlsBarshowControl()
        },
        videoPlayerMouseleave() {
            this.controlsBarshowControl()
            this.pipmouseenter = false
        },
        videoPlayerClick(e) {
            this.videoInteraction()
            if (this.pipOpenState) return
            if (e.target === this.$refs.vPlayer) {
                this.videoplayerclicktimeout && clearTimeout(this.videoplayerclicktimeout)
                this.videoplayerclicktimeout = setTimeout(() => {
                    this.videoPlayPause()
                }, 250);
            }
        },
        videoPlayerDblclick(e) {
            if (this.pipOpenState) return
            this.videoplayerclicktimeout && clearTimeout(this.videoplayerclicktimeout)
            if (this.fullscreen) this.videoFullscreen(false)
            else this.videoFullscreen(true)
        },
        videoPlayerTouchstart(e) {
            this.videoInteraction()
        },
        //判断视频是否被点击
        videoInteraction() {
            if (this.videointeraction) return
            this.videointeraction = true
            const func = (e) => {
                if (this.$refs.vPlayer.contains(e.target)) return
                this.videointeraction = false
                window.removeEventListener('click', func)
                window.removeEventListener('touchstart', func)
            }
            window.addEventListener('click', func)
            window.addEventListener('touchstart', func)
        },

        //键盘事件函数

        keySpacePausePlay(e) {
            if ((e.code === 'Space' || e.keyCode === 32) && e.target === document.body) {
                e.preventDefault()
                if (this.play) {
                    this.videoPause()
                } else {
                    this.videoPlay()
                }
            }
        },
        keySetVolume(e) {
            if (e.target === document.body && this.videointeraction) {
                if (e.code === 'ArrowUp' || e.keyCode === 38) {
                    e.preventDefault()

                    let volume = this.volume + 10
                    if (volume > 100) volume = 100
                    this.volume = volume
                    this.keyVolummeVisible = true
                    this.keyvolummevisibletimeout && clearTimeout(this.keyvolummevisibletimeout)
                    this.keyvolummevisibletimeout = setTimeout(() => {
                        this.keyVolummeVisible = false
                    }, 1800);
                } else if (e.code === 'ArrowDown' || e.keyCode === 40) {
                    e.preventDefault()
                    let volume = this.volume - 10
                    if (volume < 0) volume = 0
                    this.volume = volume
                    this.keyVolummeVisible = true
                    this.keyvolummevisibletimeout && clearTimeout(this.keyvolummevisibletimeout)
                    this.keyvolummevisibletimeout = setTimeout(() => {
                        this.keyVolummeVisible = false
                    }, 1800);
                }
            }
        },



        //视频播放器控制栏事件相关函数

        controlsBarMouseenter() {
            this.controlsbarbouseenter = true
            this.controlsBarMouseEventTimeout && clearTimeout(this.controlsBarMouseEventTimeout)
            !this.isControlsBarShow && (this.isControlsBarShow = true)
        },
        controlsBarMouseleave() {
            this.controlsbarbouseenter = false
        },
        controlsBarshowControl() {
            if (this.controlsbarbouseenter || this.progressbarmousedown || this.progressbartouchstart) return
            this.$refs.vPlayer.style.cursor = ''
            this.controlsBarMouseEventTimeout && clearTimeout(this.controlsBarMouseEventTimeout)
            !this.isControlsBarShow && (this.isControlsBarShow = true)
            this.controlsBarMouseEventTimeout = setTimeout((e) => {
                this.isControlsBarShow = false
                this.$refs.vPlayer.style.cursor = 'none'
            }, 3000);
        },

        //视频播放进度条事件相关函数

        progressBarMousedown(e) {
            // e.stopPropagation()
            e.preventDefault()
            this.progressbarmousedown = true
            this.pvisible = true

            const barRect = this.$refs.progressbar.getBoundingClientRect()
            let p = e.offsetX / barRect.width

            this.progressChange(p * 100 + '%')

            const progressBarMousemove = (e) => {
                if (this.progressbarmousedown) {
                    let x = e.clientX - barRect.left
                    if (x < 0) x = 0
                    else if (x > barRect.width) x = barRect.width
                    p = x / barRect.width
                    this.progressChange(p * 100 + '%')
                    this.progressPopupLeft = x
                    const t = Math.floor(p * this.time)
                    this.preTime = getTime(t, 'random')
                    this.getPrevImg(t)
                }
            }
            const progressBarMouseup = (e) => {
                this.$refs.video.currentTime = p * this.time
                this.progressbarmousedown = false
                this.pvisible = undefined
                this.controlsBarshowControl()
                window.removeEventListener('mousemove', progressBarMousemove)
                window.removeEventListener('mouseup', progressBarMouseup)
            }
            window.addEventListener('mousemove', progressBarMousemove)
            window.addEventListener('mouseup', progressBarMouseup)
        },
        progressBarMousemove(e) {
            if (this.progressbarmousedown) return
            this.progressPopupLeft = e.offsetX
            const t = Math.floor(e.offsetX / this.$refs.progressbar.clientWidth * this.time)
            this.preTime = getTime(t, 'random')
            this.getPrevImg(t)
        },
        progressBarTouchstart(e) {
            // e.stopPropagation()
            e.preventDefault()
            this.progressbartouchstart = true
            const barRect = this.$refs.progressbar.getBoundingClientRect()
            const x = e.touches[0].clientX - barRect.left
            let p = x / barRect.width
            this.progressPopupLeft = x
            const t = Math.floor(p * this.time)

            this.pvisibletimeout = setTimeout(() => {
                this.preTime = getTime(t, 'random')
                this.getPrevImg(t)
                this.pvisible = true
            }, 100);

            this.progressChange(p * 100 + '%')
            this.controlsBarMouseenter()

            const progressBarTouchmove = (e) => {
                e.stopPropagation()
                if (this.progressbartouchstart) {
                    this.pvisible = true
                    let x = e.touches[0].clientX - barRect.left
                    if (x < 0) x = 0
                    else if (x > barRect.width) x = barRect.width
                    p = x / barRect.width
                    this.progressChange(p * 100 + '%')
                    this.progressPopupLeft = x
                    const t = Math.floor(p * this.time)
                    this.preTime = getTime(t, 'random')
                    this.getPrevImg(t)
                }
            }
            const progressBarTouchend = (e) => {
                this.$refs.video.currentTime = p * this.time
                this.progressbartouchstart = false
                this.pvisibletimeout && clearTimeout(this.pvisibletimeout)
                this.pvisible = undefined
                this.controlsBarMouseleave()
                this.controlsBarshowControl()
                window.removeEventListener('touchmove', progressBarTouchmove)
                window.removeEventListener('touchend', progressBarTouchend)
            }
            window.addEventListener('touchmove', progressBarTouchmove)
            window.addEventListener('touchend', progressBarTouchend)

        },
        progressChange(val) {
            this.progress = val
        },

        //获取视频缩略图
        getPrevImg(t) {
            this.previmgtimeout && clearTimeout(this.previmgtimeout)
            this.previmgtimeout = setTimeout(() => {
                this.videoPreview.addImg(`/previmgs/${this.videoName}-abb${Math.ceil(t / (this.videoPreview.row * this.videoPreview.column * this.videoPreview.interval)) || 1}.jpg`, t).then(res => {
                    this.previmg = this.videoPreview.drawImg(t)
                })
            }, 0)
        },



        //视频画中画事件函数

        /**
         * 创建IntersectionObserver对象，观察videoPlayerBox在可视区的显示状况
         */
        IntersectionObserverInit() {
            this.videoDomObserver = new IntersectionObserver(entries => {
                entries.forEach(item => {
                    if (item.isIntersecting) {
                        //判断开启画中画,(当默认的画中画开启时，不在自动开启自定义画中画)
                        this.pipClose()
                        //触发videoAppear事件
                        this.$emit('videoAppear')
                    } else {
                        //判断关闭画中画
                        this.pipOpen()
                        //触发videoDisappear事件 
                        this.$emit('videoDisappear')
                    }
                })
            }, { root: document })
            this.videoDomObserver.observe(this.$refs.vPlayerBox)
        },
        /**
         * 开启视频画中画
         */
        pipOpen() {
            if (!this.pipAuto || this.defaultPipState) return
            this.pipOpenState = true
            //触发画中画开启事件
            this.$emit('pipOpen')
        },
        /**
         * 关闭视频画中画
         */
        pipClose() {
            if (!this.pipOpenState) return
            this.pipOpenState = false
            //触发画中画关闭事件
            this.$emit('pipClose')
        },
        /**
         * 画中画鼠标点击事件回调函数，记录事件鼠标在可视窗口的横纵坐标，为window添加mousemove和mouseup事件
         * @param {object} event 
         */
        pipMousedown(e) {
            e.stopPropagation()
            e.preventDefault()

            //画中画鼠标移动
            if (this.pipOpenState && e.target === this.$refs.vPlayer) {   //当pipOpenState为真（画中画开启时），且事件目标为video时

                let pipdown = true
                const pipoffsetX = e.offsetX
                const pipoffsetY = e.offsetY
                const piprect = this.$refs.vPlayer.getBoundingClientRect()
                const innerWidth = document.documentElement.clientWidth || window.innerWidth
                const innerHeight = window.innerHeight || document.documentElement.clientHeight

                const pipMousemove = (e) => {
                    e.stopPropagation()
                    e.preventDefault()
                    if (pipdown) {
                        this.pipBottom = (innerHeight - e.clientY) - (piprect.height - pipoffsetY)  //计算vPlayer的bottom值
                        this.pipRight = (innerWidth - e.clientX) - (piprect.width - pipoffsetX)     //计算vPlayer的right值
                    }
                }
                const pipMouseup = () => {
                    if (pipdown) {
                        pipdown = false
                        window.removeEventListener('mousemove', pipMousemove)
                        window.removeEventListener('mouseup', pipMouseup)
                    }
                }
                window.addEventListener('mousemove', pipMousemove)
                window.addEventListener('mouseup', pipMouseup)
            }
        },

        //画中画resize事件函数

        pipResizeStart(e, direction) {
            e.stopPropagation()
            e.preventDefault()

            this.pipresizestart = true
            this.pipresizedirection = 'pipResize' + direction

            this.pipresizeeventinfo = {
                clientX: e.clientX,
                clientY: e.clientY,
                pipWidth: this.pipWidth,
                pipHeight: this.pipHeight,
                pipBottom: this.pipBottom,
                pipRight: this.pipRight
            }
            window.addEventListener('mousemove', this.pipResize)
            window.addEventListener('mouseup', this.pipResizeEnd)
        },
        pipResize(e) {
            e.stopPropagation()
            e.preventDefault()
            if (this.pipresizestart) {
                this[this.pipresizedirection] && this[this.pipresizedirection](e)
            }
        },
        pipResizeEnd() {
            this.pipresizestart = false
            window.removeEventListener('mousemove', this.pipResize)
            window.removeEventListener('mouseup', this.pipResizeEnd)
        },
        pipResizelt(e) {
            let w = this.pipresizeeventinfo.pipWidth + (this.pipresizeeventinfo.clientX - e.clientX)
            if (w > 640) w = 640
            else if (w < 200) w = 200
            this.pipWidth = w
            this.pipHeight = w * 0.5625
        },
        pipResizet(e) {
            let h = this.pipresizeeventinfo.pipHeight + (this.pipresizeeventinfo.clientY - e.clientY)
            if (h > 360) h = 360
            else if (h < 112) h = 112
            this.pipHeight = h
            this.pipWidth = h * 1.7778
        },
        pipResizerb(e) {
            let w = this.pipresizeeventinfo.pipWidth + e.clientX - this.pipresizeeventinfo.clientX
            if (w > 640) w = 640
            else if (w < 200) w = 200
            this.pipWidth = w
            this.pipHeight = w * 0.5625
            this.pipBottom = this.pipresizeeventinfo.pipBottom - (this.pipHeight - this.pipresizeeventinfo.pipHeight)
            this.pipRight = this.pipresizeeventinfo.pipRight - (this.pipWidth - this.pipresizeeventinfo.pipWidth)
        },
        pipResizert(e) {
            let w = this.pipresizeeventinfo.pipWidth + e.clientX - this.pipresizeeventinfo.clientX
            if (w > 640) w = 640
            else if (w < 200) w = 200
            this.pipWidth = w
            this.pipHeight = w * 0.5625
            this.pipRight = this.pipresizeeventinfo.pipRight - (this.pipWidth - this.pipresizeeventinfo.pipWidth)
        },

        //使用系统默认的画中画
        systemPipOC(val) {
            if (val) {
                this.$refs.video.requestPictureInPicture().then(res => {
                    this.sysPip = true
                    this.leavepictureinpicture = () => {
                        this.sysPip = false
                        this.$refs.video.removeEventListener('leavepictureinpicture', this.leavepictureinpicture)
                        this.leavepictureinpicture = null
                    }
                    this.$refs.video.addEventListener('leavepictureinpicture', this.leavepictureinpicture)
                })
            } else {
                document.exitPictureInPicture().then(res => {
                    this.sysPip = false
                }).catch(err => { })
            }
        },


    },
    mounted() {
        this.Init()
    },
    beforeDestroy() {
        this.videoDomObserver && this.videoDomObserver.disconnect()
        window.removeEventListener('keydown', this.keySpacePausePlay)
    }
}
</script>

<style lang="scss">
.v-tip {
    display: flex;
    align-items: center;
    font-weight: 500;
    letter-spacing: 0;

    i {
        font-weight: bold;
        font-size: 18px;
        margin-right: 4px;
        cursor: pointer;

        &:hover {
            color: #FB7299;
        }
    }

    span {
        color: #FB7299;
        cursor: pointer;

        &:hover {
            color: rgb(255, 159, 191);
        }
    }

}
</style>

<style lang="scss" scoped>
.v-player-box {
    --border-radius: 6px;
    width: 100%;
    padding-top: 56.25%;
    position: relative;
    overflow: hidden;

    &,
    .v-player,
    .v-player video {
        border-radius: var(--border-radius);
    }

    .v-player {
        width: 100%;
        height: 100%;
        position: absolute;
        right: 0;
        bottom: 0;
        overflow: hidden;

        video {
            height: 100%;
            width: 100%;
            background-color: black;
            pointer-events: none;
        }

        .mirror {
            transform: rotateY(180deg);
        }

        .v-controls-bar {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            background-image: linear-gradient(to top, rgba(0, 0, 0, .5) 0%, rgba(0, 0, 0, 0) 100%);
            box-sizing: border-box;
            padding: 0 12px;
            transition: .2s;
            transition-property: transform;
            user-select: none;

            .v-controls-bar-top {
                .progress-bar-box {
                    width: 100%;
                    height: 16px;
                    display: flex;
                    align-items: center;
                    cursor: pointer;

                    .progress-bar {
                        position: relative;
                        width: 100%;
                        height: 4px;
                        background-color: rgba(255, 255, 255, .2);
                        border-radius: 2px;
                        overflow: hidden;

                        .progress-buffer,
                        .progress-current {
                            position: absolute;
                            left: 0;
                            top: 0;
                            height: 100%;
                            width: 0;
                            border-radius: 2px;
                            background-color: rgba(255, 255, 255, .3);
                        }

                        .progress-current {
                            background-color: #00a1d6;
                        }

                    }
                }

                .progress-popup-pretime {
                    padding: 0 12px;
                    line-height: 26px;
                    font-size: 12px;
                    font-family: Menlo;
                    color: white;
                }
            }

            .v-controls-bar-bottom {
                height: 40px;
                padding-bottom: 6px;
                display: flex;
                justify-content: space-between;
                align-items: center;

                .v-controls-bar-bottom-right,
                .v-controls-bar-bottom-left {
                    display: flex;
                    align-items: center;
                }

                .v-controls-bar-item {
                    flex-shrink: 0;
                }

                .v-ctrl {

                    transition: 1.2s;
                    cursor: pointer;

                    &:hover {

                        .ctrl-icon,
                        .ctrl-text {
                            opacity: 1;
                            transform: scale(1.15);
                        }
                    }

                    .ctrl-icon,
                    .ctrl-text {
                        opacity: .85;
                        transition: .2s;
                    }

                    .ctrl-icon {
                        width: 36px;
                        height: 22px;
                    }

                    .ctrl-text,
                    .ctrl-time {
                        text-align: center;
                        line-height: 22px;
                        font-size: 14px;
                        color: white;
                    }

                    .ctrl-time {
                        min-width: 90px;
                        display: flex;
                        justify-content: center;
                        font-size: 12px;
                        font-family: Menlo;
                        // font-weight: bold;

                        span {
                            padding: 0 4px;
                            text-align: center;
                        }
                    }
                }

                .ctrl-playbackrate {
                    width: 50px;
                }

                .ctrl-quality {
                    padding: 0 9px;
                }

                .ctrl-setting {

                    &:hover svg {
                        animation: setting 1.2s infinite linear;
                    }

                    @keyframes setting {
                        0% {
                            transform: rotateZ(0deg);
                        }

                        100% {
                            transform: rotateZ(180deg);
                        }

                    }
                }

                .ctrl-pip {
                    .arrow {
                        opacity: 0;
                        transition: .3s;
                    }

                    &:hover .arrow {
                        opacity: 1;
                        animation: arrow 1.2s infinite;
                    }

                    @keyframes arrow {

                        0%,
                        50%,
                        100% {
                            transform: translate(0, 0);
                        }

                        25% {
                            transform: translate(10px, 10px);
                        }
                    }

                }

                .ctrl-exit-pip {
                    .arrow {
                        opacity: 0;
                        transition: .3s;
                        transform: translate(10px, 10px) rotateZ(180deg);
                    }

                    &:hover .arrow {
                        opacity: 1;
                        animation: arrow-e 1.2s infinite;
                    }

                    @keyframes arrow-e {

                        0%,
                        50%,
                        100% {
                            transform: translate(12px, 12px) rotateZ(180deg);
                        }

                        25% {
                            transform: translate(0, 0) rotateZ(180deg);
                        }

                    }
                }

                .ctrl-volume {

                    &:hover {
                        .v1 {
                            animation: volume 1s infinite linear;
                        }

                        .v2 {
                            animation: volume 1s infinite linear .1s;
                        }

                        .v3 {
                            animation: volume 1s infinite linear .2s;
                        }

                    }

                    @keyframes volume {
                        0% {
                            opacity: 1;
                        }

                        50% {
                            opacity: 0.1;
                        }

                        100% {
                            opacity: 1;
                        }
                    }

                    @keyframes volume1 {
                        0% {
                            opacity: 0.2;
                            transform: translate(44px, 45px) scale(0.8);
                        }

                        30% {
                            opacity: 1;
                        }

                        80% {
                            opacity: 1;
                        }

                        100% {
                            opacity: 0.2;
                            transform: translate(55px, 45px) scale(1);
                        }
                    }

                    @keyframes volume2 {
                        0% {
                            opacity: 0.2;
                            transform: translate(55px, 45px) scale(0.8);
                        }

                        30% {
                            opacity: 1;
                        }

                        80% {
                            opacity: 1;
                        }

                        100% {
                            opacity: 0.2;
                            transform: translate(66px, 45px) scale(1);
                        }
                    }
                }

                .ctrl-muted {

                    &:hover {
                        .horn {
                            animation: muted 1.2s infinite;
                        }
                    }

                    @keyframes muted {

                        0%,
                        45%,
                        100% {
                            transform: translate(0, 0);
                        }

                        15% {
                            transform: translate(-5px, -5px);
                        }

                        30% {
                            transform: translate(5px, 5px);
                        }
                    }
                }

                .ctrl-wide {

                    &:hover {
                        svg {
                            animation: wide 1.2s infinite;
                        }
                    }

                    @keyframes wide {

                        0%,
                        50%,
                        100% {
                            transform: scaleX(1);
                        }

                        25% {
                            transform: scaleX(1.3);
                        }
                    }
                }

                .ctrl-narrow {
                    &:hover {
                        svg {
                            animation: narrow 1.2s infinite;
                        }
                    }

                    @keyframes narrow {

                        0%,
                        50%,
                        100% {
                            transform: scaleX(1);
                        }

                        25% {
                            transform: scaleX(0.7);
                        }
                    }
                }

                .ctrl-full {

                    &:hover {

                        .m1 {
                            animation: full-m1 1.2s infinite;
                        }

                        .m2 {
                            animation: full-m2 1.2s infinite;
                        }

                        .m3 {
                            animation: full-m3 1.2s infinite;
                        }

                        .cen {
                            animation: full-cen 1.2s infinite;
                        }
                    }

                    @keyframes full-m1 {

                        0%,
                        50%,
                        100% {
                            transform: translateY(0);
                        }

                        25% {
                            transform: translateY(4px);
                        }
                    }

                    @keyframes full-m2 {

                        0%,
                        50%,
                        100% {
                            transform: translate(0, 0);
                        }

                        25% {
                            transform: translate(4px, -4px);
                        }
                    }

                    @keyframes full-m3 {

                        0%,
                        50%,
                        100% {
                            transform: translate(0, 0);
                        }

                        25% {
                            transform: translate(-4px, -4px);
                        }
                    }

                    @keyframes full-cen {

                        0%,
                        50%,
                        100% {
                            transform: scale(1);
                        }

                        25% {
                            transform: scale(1.6);
                        }
                    }

                }

                .ctrl-exit-full {
                    &:hover {

                        .m1 {
                            animation: full-e-m1 1.2s infinite;
                        }

                        .m2 {
                            animation: full-e-m2 1.2s infinite;
                        }

                        .m3 {
                            animation: full-e-m3 1.2s infinite;
                        }

                        .cen {
                            animation: full-e-cen 1.2s infinite;
                        }
                    }

                    @keyframes full-e-m1 {

                        0%,
                        50%,
                        100% {
                            transform: translateY(5px);
                        }

                        25% {
                            transform: translateY(0);
                        }
                    }

                    @keyframes full-e-m2 {

                        0%,
                        50%,
                        100% {
                            transform: translate(5px, -5px);
                        }

                        25% {
                            transform: translate(0, 0);
                        }
                    }

                    @keyframes full-e-m3 {

                        0%,
                        50%,
                        100% {
                            transform: translate(-5px, -5px);
                        }

                        25% {
                            transform: translate(0, 0);
                        }
                    }

                    @keyframes full-e-cen {

                        0%,
                        50%,
                        100% {
                            transform: scale(1.6);
                        }

                        25% {
                            transform: scale(1);
                        }
                    }
                }

                .playbackrate-box {
                    width: 70px;
                    border-radius: 6px;
                    overflow: hidden;

                    .pr-option {
                        height: 36px;
                        line-height: 36px;
                        text-align: center;
                        color: white;
                        font-size: 14px;
                        cursor: pointer;

                        &:hover {
                            background-color: rgba(255, 255, 255, .2);
                        }
                    }

                    .active {
                        color: #00aeec;
                    }
                }

                .volume-range-box {
                    width: 32px;
                    padding: 8px 5px 12px 5px;
                    display: flex;
                    flex-direction: column;
                    justify-content: space-between;
                    align-items: center;

                    .range-text {
                        margin-bottom: 3px;
                        font-size: 13px;
                        color: white;
                    }

                    input {

                        --range: 100%;
                        width: 100px;
                        height: 4px;
                        border-radius: 4px;
                        outline: none;
                        background-color: transparent;
                        background-image: linear-gradient(to right, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 1) 50%, rgba(255, 255, 255, 0.5) 50%, rgba(255, 255, 255, 0.5) 100%);
                        background-size: 200%;
                        background-position-x: calc(100% - var(--range));
                        border-radius: 6px;
                        cursor: pointer;

                        transform-origin: 50% 50%;
                        transform: rotateZ(-90deg) translateX(50%);

                        -webkit-appearance: none;
                        appearance: none;
                    }

                    input[type=range]::-webkit-slider-thumb {
                        -webkit-appearance: none;
                        height: 10px;
                        width: 10px;
                        background: white;
                        border-radius: 50%;
                    }
                }

                .setting-box {
                    width: 130px;
                    color: white;
                    font-size: 13px;

                    .setting-option {
                        height: 32px;
                        padding: 0 20px;
                        display: flex;
                        align-items: center;
                        justify-content: space-between;
                    }

                }

                .ctrl-tip-box {
                    padding: 0 12px;
                    line-height: 35px;
                    font-size: 13px;
                    color: white;
                }

                .quality-box {
                    width: 120px;
                    border-radius: 6px;
                    overflow: hidden;

                    .q-option {
                        height: 36px;
                        line-height: 36px;
                        padding: 0 15px;
                        // text-align: center;
                        color: white;
                        font-size: 13px;
                        cursor: pointer;

                        &:hover {
                            background-color: rgba(255, 255, 255, .2);
                        }
                    }

                    .active {
                        color: #00aeec;
                    }
                }
            }

        }

        .v-controls-bar-fullscreen {

            .v-controls-bar-bottom {
                height: 60px;

                .v-ctrl {
                    .ctrl-icon {
                        width: 54px;
                        height: 28px;
                    }

                    .ctrl-text,
                    .ctrl-time {
                        line-height: 28px;
                    }

                    .ctrl-text {
                        font-size: 16px;
                        font-weight: bold;
                    }

                    .ctrl-time {
                        font-size: 14px;
                    }
                }

                .ctrl-playbackrate {
                    width: 66px;
                }
            }
        }

        .v-controls-bar-hide {
            transition-property: all;
            bottom: 9px;
            padding: 0;
            transform: translateY(100%);
        }

        .v-play-icon {
            width: 64px;
            height: 64px;
            position: absolute;
            bottom: 60px;
            right: 35px;
            cursor: pointer;
        }

        .v-play-icon-fullscreen {
            bottom: 85px;
            right: 45px;
        }

        .v-pip-close {
            position: absolute;
            top: 10px;
            right: 10px;
            cursor: pointer;
            height: 22px;
            width: 22px;
            color: white;

            &:hover {
                color: #FB7299;
            }

            i {
                font-size: 22px;
                font-weight: bold;
            }
        }

        .v-pip-box {
            width: 320px;
            height: 180px;
            position: fixed;
            bottom: 60px;
            right: 60px;
            z-index: 20;
            cursor: move;

            .v-pip {
                width: 100%;
                height: 100%;
                position: absolute;
                top: 0;
                left: 0;

                video {
                    border-radius: 6px;
                }
            }
        }

        .v-key-volume {
            position: absolute;
            left: 50%;
            top: 50%;
            min-width: 84px;
            padding: 7px 8px;
            background-color: rgba(255, 255, 255, .8);
            border-radius: 4px;
            transform: translate(-50%, -55%);
            display: flex;
            align-items: center;
            justify-content: space-evenly;
            font-family: Menlo;
            font-size: 20px;

            .icon {
                width: 34px;
                height: 34px;
                color: #000;
            }

            .volume-per {
                flex: 1;
                text-align: center;
                line-height: 34px;
                padding: 0 2px;
            }
        }

        .v-player-left-area {
            position: absolute;
            top: 8px;
            left: 0;
            height: 80%;
            width: 8px;
            cursor: w-resize;
        }

        .v-player-right-area {
            position: absolute;
            top: 8px;
            right: 0;
            height: 80%;
            width: 8px;
            cursor: e-resize;
        }

        .v-player-top-area {
            position: absolute;
            top: 0px;
            right: 8px;
            left: 8px;
            height: 8px;
            width: auto;
            cursor: n-resize;
        }

        .v-player-top-left-area {
            position: absolute;
            top: 0px;
            left: 0px;
            height: 8px;
            width: 8px;
            cursor: nw-resize;
        }

        .v-player-top-right-area {
            position: absolute;
            top: 0px;
            right: 0px;
            height: 8px;
            width: 8px;
            cursor: ne-resize;
        }

    }

    .pip {
        position: fixed;
        z-index: 2000;
        right: 60px;
        bottom: 50px;
        width: 320px;
        height: 180px;
        border-radius: 6px;
        cursor: move;
        user-select: none;

        .v-play-icon {
            bottom: 50%;
            right: 50%;
            transform: translate(50%, 45%);
            transition: .2s;
            transition-property: background-image;
        }
    }
}

.offlight {

    &::after {
        content: '';
        display: block;
        position: fixed;
        z-index: 998;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, .9);
    }

    .v-player {
        z-index: 999;
    }
}

.progress-popup {
    position: relative;
    width: 160px;
    height: 90px;

    .progress-popup-pretime {
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        background-color: rgba(0, 0, 0, .8);
        border-radius: 4px;
        padding: 0 5px;
        line-height: 18px;
        font-size: 12px;
        font-family: Menlo;
        color: white;
    }

    .progress-popup-preimg {
        width: 160px;
        height: 90px;
        background-color: black;
        display: flex;
        justify-content: center;
        border-radius: 4px;
        overflow: hidden;


        img {
            // width: 100%;
            height: 100%;
            // border-radius: 4px;
        }
    }
}


.playbackrate-box {
    width: 70px;
    border-radius: 6px;
    overflow: hidden;

    .pr-option {
        height: 36px;
        line-height: 36px;
        text-align: center;
        color: white;
        font-size: 14px;
        cursor: pointer;

        &:hover {
            background-color: rgba(255, 255, 255, .2);
        }
    }

    .active {
        color: #00aeec;
    }
}

.volume-range-box {
    width: 32px;
    padding: 8px 5px 12px 5px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    align-items: center;

    .range-text {
        margin-bottom: 3px;
        font-size: 13px;
        color: white;
    }

    input {

        --range: 100%;
        width: 100px;
        height: 4px;
        border-radius: 4px;
        outline: none;
        background-color: transparent;
        background-image: linear-gradient(to right, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 1) 50%, rgba(255, 255, 255, 0.5) 50%, rgba(255, 255, 255, 0.5) 100%);
        background-size: 200%;
        background-position-x: calc(100% - var(--range));
        border-radius: 6px;
        cursor: pointer;

        transform-origin: 50% 50%;
        transform: rotateZ(-90deg) translateX(50%);

        -webkit-appearance: none;
        appearance: none;
    }

    input[type=range]::-webkit-slider-thumb {
        -webkit-appearance: none;
        height: 10px;
        width: 10px;
        background: white;
        border-radius: 50%;
    }
}

.setting-box {
    width: 130px;
    color: white;
    font-size: 13px;

    .setting-option {
        height: 32px;
        padding: 0 20px;
        display: flex;
        align-items: center;
        justify-content: space-between;

        span {
            flex-shrink: 0;
        }
    }

}

.ctrl-tip-box {
    padding: 0 12px;
    line-height: 35px;
    font-size: 13px;
    color: white;
}

.quality-box {
    width: 120px;
    border-radius: 6px;
    overflow: hidden;

    .q-option {
        height: 36px;
        line-height: 36px;
        padding: 0 15px;
        color: white;
        font-size: 13px;
        cursor: pointer;

        &:hover {
            background-color: rgba(255, 255, 255, .2);
        }
    }

    .active {
        color: #00aeec;
    }
}

.opac-enter-to,
.opac-leave {
    opacity: 1;
}

.opac-enter-active,
.opac-leave-active {
    transition: .2s;
}

.opac-enter,
.opac-leave-to {
    opacity: 0;
}


video::-webkit-media-controls-enclosure {
    display: none;
}

video::-webkit-media-controls-panel {
    display: none;
}
</style>